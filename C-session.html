<!DOCTYPE HTML>
<html lang>
    <head>
        <meta charset="UTF-8">
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <title>Session (Gorilla Session) - Dasar Pemrograman Golang</title>
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="description" content>
        <meta name="generator" content="GitBook 3.2.3">
        
        
        
    
    <link rel="stylesheet" href="gitbook/style.css">

    
            
                
                <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@docsearch/css@3">
                
            
                
                <link rel="stylesheet" href="gitbook/gitbook-plugin-docsearch-v3/style.css">
                
            
                
                <link rel="stylesheet" href="gitbook/gitbook-plugin-disqus/plugin.css" media="print" onload="this.media='all'">
                
            
                
                <link rel="stylesheet" href="gitbook/gitbook-plugin-highlight/website.css" media="print" onload="this.media='all'">
                
            
                
                <link rel="stylesheet" href="gitbook/gitbook-plugin-fontsettings/website.css" media="print" onload="this.media='all'">
                
            
        

    

    
        
    
        
    
        
    
        
    
        
    
        
    

        
    
    
    <meta name="google-site-verification" content="UZnxS2Dk3fm2_Elms3a__56Q_oQ3sQ1h0SVXXlHSmbE">
    
    <meta name="og:image" content="https://dasarpemrogramangolang.novalagung.com/images/cover_fb_share.jpg">
    
    <meta name="twitter:image" content="https://dasarpemrogramangolang.novalagung.com/images/cover_fb_share.jpg">
    
    
    
    
    <meta name="HandheldFriendly" content="true">
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <link rel="apple-touch-icon-precomposed" sizes="152x152" href="gitbook/images/apple-touch-icon-precomposed-152.png">
    <link rel="shortcut icon" href="gitbook/images/favicon.ico" type="image/x-icon">

    
    <link rel="next" href="C-cors-preflight-request.html">
    
    
    <link rel="prev" href="C-securecookie.html">
    


    <link rel="stylesheet" href="gitbook/custom.css?v=3.2023.07.06.132024"><script async defer src="https://buttons.github.io/buttons.js"></script><script async src="https://www.googletagmanager.com/gtag/js?id=G-MZ74P74K72"></script>
		<script>
			window.dataLayer = window.dataLayer || [];
			function gtag(){dataLayer.push(arguments);}
			gtag('js', new Date());
			gtag('config', 'G-MZ74P74K72');
		</script></head>
    <body>
        
<div class="book">
    <div class="book-summary"><div id="book-search-input"><div id="book-doc-search-input"></div></div>
        
            
            
                <nav role="navigation">
                


<ul class="summary">
    
    

    

    
        
        
    
        <li class="chapter " data-level="1.1" data-path="./">
            
                <a href="./">
            
                    
                    Dasar Pemrograman Golang
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2">
            
                <a target="_blank" href="https://github.com/novalagung/dasarpemrogramangolang/raw/ebooks/dasarpemrogramangolang.pdf">
            
                    
                    Download versi PDF
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3" data-path="CONTRIBUTING.html">
            
                <a href="CONTRIBUTING.html">
            
                    
                    Author &amp; Contributors
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4" data-path="DISTRIBUTION.html">
            
                <a href="DISTRIBUTION.html">
            
                    
                    Lisensi dan Distribusi Konten
            
                </a>
            

            
        </li>
    

    
        
        <li class="divider"></li>
        
        
    
        <li class="chapter " data-level="2.1">
            
                <span>
            
                    
                    Referensi Belajar Lainnya
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="2.1.1">
            
                <a target="_blank" href="https://dasarpemrogramanrust.novalagung.com/">
            
                    
                    &#x1F4D6; Ebook: Dasar Pemrograman Rust
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.1.2">
            
                <a target="_blank" href="https://learndevops.novalagung.com/">
            
                    
                    &#x1F4D6; Ebook: Learn DevOps
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.1.3">
            
                <a target="_blank" href="https://www.udemy.com/course/praktis-belajar-docker-dan-kubernetes-untuk-pemula/?couponCode=FREE-202306">
            
                    
                    &#x25B6;&#xFE0F; Udemy Course: Belajar Docker &amp; Kubernetes (FREE Juni 2023)
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

    
        
        <li class="divider"></li>
        
        
    
        <li class="chapter " data-level="3.1">
            
                <span>
            
                    
                    A. Pemrograman Go Dasar
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="3.1.1" data-path="1-berkenalan-dengan-golang.html">
            
                <a href="1-berkenalan-dengan-golang.html">
            
                    
                    A.1. Belajar Golang
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.1.2" data-path="2-instalasi-golang.html">
            
                <a href="2-instalasi-golang.html">
            
                    
                    A.2. Instalasi Golang (Stable &amp; Unstable)
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.1.3" data-path="A-setup-go-project-dengan-go-modules.html">
            
                <a href="A-setup-go-project-dengan-go-modules.html">
            
                    
                    A.3. Setup Go Modules
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.1.4" data-path="A-gopath-dan-workspace.html">
            
                <a href="A-gopath-dan-workspace.html">
            
                    
                    A.4. Setup GOPATH Dan Workspace
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.1.5" data-path="A-instalasi-editor.html">
            
                <a href="A-instalasi-editor.html">
            
                    
                    A.5. Instalasi Editor
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.1.6" data-path="A-go-command.html">
            
                <a href="A-go-command.html">
            
                    
                    A.6. Go Command
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.1.7" data-path="A-hello-world.html">
            
                <a href="A-hello-world.html">
            
                    
                    A.7. Program Pertama: Hello World
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.1.8" data-path="A-komentar.html">
            
                <a href="A-komentar.html">
            
                    
                    A.8. Komentar
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.1.9" data-path="A-variabel.html">
            
                <a href="A-variabel.html">
            
                    
                    A.9. Variabel
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.1.10" data-path="A-tipe-data.html">
            
                <a href="A-tipe-data.html">
            
                    
                    A.10. Tipe Data
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.1.11" data-path="A-konstanta.html">
            
                <a href="A-konstanta.html">
            
                    
                    A.11. Konstanta
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.1.12" data-path="A-operator.html">
            
                <a href="A-operator.html">
            
                    
                    A.12. Operator
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.1.13" data-path="A-seleksi-kondisi.html">
            
                <a href="A-seleksi-kondisi.html">
            
                    
                    A.13. Seleksi Kondisi
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.1.14" data-path="A-perulangan.html">
            
                <a href="A-perulangan.html">
            
                    
                    A.14. Perulangan
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.1.15" data-path="A-array.html">
            
                <a href="A-array.html">
            
                    
                    A.15. Array
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.1.16" data-path="A-slice.html">
            
                <a href="A-slice.html">
            
                    
                    A.16. Slice
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.1.17" data-path="A-map.html">
            
                <a href="A-map.html">
            
                    
                    A.17. Map
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.1.18" data-path="A-fungsi.html">
            
                <a href="A-fungsi.html">
            
                    
                    A.18. Fungsi
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.1.19" data-path="A-fungsi-multiple-return.html">
            
                <a href="A-fungsi-multiple-return.html">
            
                    
                    A.19. Fungsi Multiple Return
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.1.20" data-path="A-fungsi-variadic.html">
            
                <a href="A-fungsi-variadic.html">
            
                    
                    A.20. Fungsi Variadic
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.1.21" data-path="A-fungsi-closure.html">
            
                <a href="A-fungsi-closure.html">
            
                    
                    A.21. Fungsi Closure
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.1.22" data-path="A-fungsi-sebagai-parameter.html">
            
                <a href="A-fungsi-sebagai-parameter.html">
            
                    
                    A.22. Fungsi Sebagai parameter
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.1.23" data-path="A-pointer.html">
            
                <a href="A-pointer.html">
            
                    
                    A.23. Pointer
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.1.24" data-path="A-struct.html">
            
                <a href="A-struct.html">
            
                    
                    A.24. Struct
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.1.25" data-path="A-method.html">
            
                <a href="A-method.html">
            
                    
                    A.25. Method
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.1.26" data-path="A-properti-public-dan-private.html">
            
                <a href="A-properti-public-dan-private.html">
            
                    
                    A.26. Properti Public dan Private (Exported vs Unexported)
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.1.27" data-path="A-interface.html">
            
                <a href="A-interface.html">
            
                    
                    A.27. Interface
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.1.28" data-path="A-interface-kosong.html">
            
                <a href="A-interface-kosong.html">
            
                    
                    A.28. Interface Kosong (Any)
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.1.29" data-path="A-reflect.html">
            
                <a href="A-reflect.html">
            
                    
                    A.29. Reflect
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.1.30" data-path="A-goroutine.html">
            
                <a href="A-goroutine.html">
            
                    
                    A.30. Goroutine
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.1.31" data-path="A-channel.html">
            
                <a href="A-channel.html">
            
                    
                    A.31. Channel
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.1.32" data-path="A-buffered-channel.html">
            
                <a href="A-buffered-channel.html">
            
                    
                    A.32. Buffered Channel
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.1.33" data-path="A-channel-select.html">
            
                <a href="A-channel-select.html">
            
                    
                    A.33. Channel - Select
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.1.34" data-path="A-channel-range-close.html">
            
                <a href="A-channel-range-close.html">
            
                    
                    A.34. Channel - Range &amp; Close
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.1.35" data-path="A-channel-timeout.html">
            
                <a href="A-channel-timeout.html">
            
                    
                    A.35. Channel - Timeout
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.1.36" data-path="A-defer-exit.html">
            
                <a href="A-defer-exit.html">
            
                    
                    A.36. Defer &amp; Exit
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.1.37" data-path="A-error-panic-recover.html">
            
                <a href="A-error-panic-recover.html">
            
                    
                    A.37. Error, Panic, &amp; Recover
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.1.38" data-path="A-string-format.html">
            
                <a href="A-string-format.html">
            
                    
                    A.38. Layout Format String
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.1.39" data-path="A-random.html">
            
                <a href="A-random.html">
            
                    
                    A.39. Random
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.1.40" data-path="A-time-parsing-format.html">
            
                <a href="A-time-parsing-format.html">
            
                    
                    A.40. Time, Parsing Time, &amp; Format Time
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.1.41" data-path="A-timer-ticker-scheduler.html">
            
                <a href="A-timer-ticker-scheduler.html">
            
                    
                    A.41. Timer, Ticker, &amp; Scheduler
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.1.42" data-path="A-time-duration.html">
            
                <a href="A-time-duration.html">
            
                    
                    A.42. Time Duration
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.1.43" data-path="A-data-type-conversion.html">
            
                <a href="A-data-type-conversion.html">
            
                    
                    A.43. Konversi Antar Tipe Data
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.1.44" data-path="A-strings.html">
            
                <a href="A-strings.html">
            
                    
                    A.44. Fungsi String
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.1.45" data-path="A-regex.html">
            
                <a href="A-regex.html">
            
                    
                    A.45. Regex
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.1.46" data-path="A-encoding-base64.html">
            
                <a href="A-encoding-base64.html">
            
                    
                    A.46. Encode - Decode Base64
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.1.47" data-path="A-hash-sha1.html">
            
                <a href="A-hash-sha1.html">
            
                    
                    A.47. Hash Sha1
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.1.48" data-path="A-command-line-args-flag.html">
            
                <a href="A-command-line-args-flag.html">
            
                    
                    A.48. Arguments &amp; Flag
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.1.49" data-path="A-exec.html">
            
                <a href="A-exec.html">
            
                    
                    A.49. Exec
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.1.50" data-path="A-file.html">
            
                <a href="A-file.html">
            
                    
                    A.50. File
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.1.51" data-path="A-web-server.html">
            
                <a href="A-web-server.html">
            
                    
                    A.51. Web Server
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.1.52" data-path="A-url-parsing.html">
            
                <a href="A-url-parsing.html">
            
                    
                    A.52. URL Parsing
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.1.53" data-path="A-json.html">
            
                <a href="A-json.html">
            
                    
                    A.53. JSON Data
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.1.54" data-path="A-web-service-api.html">
            
                <a href="A-web-service-api.html">
            
                    
                    A.54. Web Service API Server
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.1.55" data-path="A-client-http-request-simple.html">
            
                <a href="A-client-http-request-simple.html">
            
                    
                    A.55. Simple Client HTTP Request
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.1.56" data-path="A-sql.html">
            
                <a href="A-sql.html">
            
                    
                    A.56. SQL
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.1.57" data-path="A-mongodb.html">
            
                <a href="A-mongodb.html">
            
                    
                    A.57. NoSQL MongoDB
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.1.58" data-path="A-unit-test.html">
            
                <a href="A-unit-test.html">
            
                    
                    A.58. Unit Test
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.1.59" data-path="A-waitgroup.html">
            
                <a href="A-waitgroup.html">
            
                    
                    A.59. sync.WaitGroup
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.1.60" data-path="A-mutex.html">
            
                <a href="A-mutex.html">
            
                    
                    A.60. sync.Mutex
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.1.61" data-path="A-go-vendoring.html">
            
                <a href="A-go-vendoring.html">
            
                    
                    A.61. Go Vendoring
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.1.62" data-path="A-concurrency-pipeline.html">
            
                <a href="A-concurrency-pipeline.html">
            
                    
                    A.62. Concurrency Pattern: Pipeline
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.1.63" data-path="A-simplified-fan-in-fan-out-pipeline.html">
            
                <a href="A-simplified-fan-in-fan-out-pipeline.html">
            
                    
                    A.63. Concurrency Pattern: Simplified Fan-in Fan-out Pipeline
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.1.64" data-path="A-pipeline-context-cancellation.html">
            
                <a href="A-pipeline-context-cancellation.html">
            
                    
                    A.64. Concurrency Pattern: Context Cancellation Pipeline
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.1.65" data-path="A-golang-generics.html">
            
                <a href="A-golang-generics.html">
            
                    
                    A.65. Go Generics
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

    
        
        <li class="divider"></li>
        
        
    
        <li class="chapter " data-level="4.1">
            
                <span>
            
                    
                    B. Pemrograman Web Go Dasar
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="4.1.1" data-path="B-golang-web-hello-world.html">
            
                <a href="B-golang-web-hello-world.html">
            
                    
                    B.1. Golang Web App: Hello World
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="4.1.2" data-path="B-routing-http-handlefunc.html">
            
                <a href="B-routing-http-handlefunc.html">
            
                    
                    B.2. Routing http.HandleFunc
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="4.1.3" data-path="B-routing-static-assets.html">
            
                <a href="B-routing-static-assets.html">
            
                    
                    B.3. Routing Static Assets
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="4.1.4" data-path="B-template-render-html.html">
            
                <a href="B-template-render-html.html">
            
                    
                    B.4. Template: Render HTML Template
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="4.1.5" data-path="B-template-render-partial-html.html">
            
                <a href="B-template-render-partial-html.html">
            
                    
                    B.5. Template: Render Partial HTML Template
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="4.1.6" data-path="B-template-actions-variables.html">
            
                <a href="B-template-actions-variables.html">
            
                    
                    B.6. Template: Actions &amp; Variables
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="4.1.7" data-path="B-template-functions.html">
            
                <a href="B-template-functions.html">
            
                    
                    B.7. Template: Functions
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="4.1.8" data-path="B-template-custom-functions.html">
            
                <a href="B-template-custom-functions.html">
            
                    
                    B.8. Template: Custom Functions
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="4.1.9" data-path="B-render-specific-html-template.html">
            
                <a href="B-render-specific-html-template.html">
            
                    
                    B.9. Template: Render Specific HTML Template
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="4.1.10" data-path="B-render-html-string.html">
            
                <a href="B-render-html-string.html">
            
                    
                    B.10. Template: Render HTML String
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="4.1.11" data-path="B-http-method-basic.html">
            
                <a href="B-http-method-basic.html">
            
                    
                    B.11. HTTP Method: POST &amp; GET
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="4.1.12" data-path="B-form-value.html">
            
                <a href="B-form-value.html">
            
                    
                    B.12. Form Value
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="4.1.13" data-path="B-form-upload-file.html">
            
                <a href="B-form-upload-file.html">
            
                    
                    B.13. Form Upload File
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="4.1.14" data-path="B-ajax-json-payload.html">
            
                <a href="B-ajax-json-payload.html">
            
                    
                    B.14. AJAX JSON Payload
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="4.1.15" data-path="B-ajax-json-response.html">
            
                <a href="B-ajax-json-response.html">
            
                    
                    B.15. AJAX JSON Response
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="4.1.16" data-path="B-ajax-multi-upload.html">
            
                <a href="B-ajax-multi-upload.html">
            
                    
                    B.16. AJAX Multiple File Upload
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="4.1.17" data-path="B-download-file.html">
            
                <a href="B-download-file.html">
            
                    
                    B.17. Download File
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="4.1.18" data-path="B-http-basic-auth.html">
            
                <a href="B-http-basic-auth.html">
            
                    
                    B.18. HTTP Basic Auth
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="4.1.19" data-path="B-middleware-using-http-handler.html">
            
                <a href="B-middleware-using-http-handler.html">
            
                    
                    B.19. Middleware http.Handler
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="4.1.20" data-path="B-custom-mux-multiplexer.html">
            
                <a href="B-custom-mux-multiplexer.html">
            
                    
                    B.20. Custom Multiplexer
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="4.1.21" data-path="B-cookie.html">
            
                <a href="B-cookie.html">
            
                    
                    B.21. HTTP Cookie
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="4.1.22" data-path="B-simple-configuration.html">
            
                <a href="B-simple-configuration.html">
            
                    
                    B.22. Simple Configuration
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="4.1.23" data-path="B-server-handler-http-request-cancellation.html">
            
                <a href="B-server-handler-http-request-cancellation.html">
            
                    
                    B.23. Server Handler HTTP Request Cancellation
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

    
        
        <li class="divider"></li>
        
        
    
        <li class="chapter " data-level="5.1">
            
                <span>
            
                    
                    C. Pemrograman Go Lanjut
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="5.1.1" data-path="C-project-layout-structure.html">
            
                <a href="C-project-layout-structure.html">
            
                    
                    C.1. Project Layout Structure
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="5.1.2" data-path="C-golang-web-framework.html">
            
                <a href="C-golang-web-framework.html">
            
                    
                    C.2. Go Web Framework
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="5.1.3" data-path="C-echo-routing.html">
            
                <a href="C-echo-routing.html">
            
                    
                    C.3. Echo Framework &amp; Routing
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="5.1.4" data-path="C-parsing-http-request-payload-echo.html">
            
                <a href="C-parsing-http-request-payload-echo.html">
            
                    
                    C.4. Parsing HTTP Request Payload (Echo)
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="5.1.5" data-path="C-http-request-payload-validation.html">
            
                <a href="C-http-request-payload-validation.html">
            
                    
                    C.5. HTTP Request Payload Validation (Validator v9, Echo)
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="5.1.6" data-path="C-http-error-handling.html">
            
                <a href="C-http-error-handling.html">
            
                    
                    C.6. HTTP Error Handling (Validator v9, Echo)
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="5.1.7" data-path="C-echo-template-rendering.html">
            
                <a href="C-echo-template-rendering.html">
            
                    
                    C.7. Template Rendering in Echo
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="5.1.8" data-path="C-advanced-middleware-and-logging.html">
            
                <a href="C-advanced-middleware-and-logging.html">
            
                    
                    C.8. Advanced Middleware &amp; Logging (Logrus, Echo Logger)
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="5.1.9" data-path="C-flag-parser.html">
            
                <a href="C-flag-parser.html">
            
                    
                    C.9. CLI Flag Parser (Kingpin)
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="5.1.10" data-path="C-advanced-configuration-viper.html">
            
                <a href="C-advanced-configuration-viper.html">
            
                    
                    C.10. Advanced Configuration: Viper
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="5.1.11" data-path="C-best-practice-configuration-env-var.html">
            
                <a href="C-best-practice-configuration-env-var.html">
            
                    
                    C.11. Best Practice Configuration: Environment Variable
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="5.1.12" data-path="C-securecookie.html">
            
                <a href="C-securecookie.html">
            
                    
                    C.12. Secure Cookie (Gorilla Securecookie)
            
                </a>
            

            
        </li>
    
        <li class="chapter active" data-level="5.1.13" data-path="C-session.html">
            
                <a href="C-session.html">
            
                    
                    C.13. Session (Gorilla Session)
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="5.1.14" data-path="C-cors-preflight-request.html">
            
                <a href="C-cors-preflight-request.html">
            
                    
                    C.14. CORS &amp; Preflight Request
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="5.1.15" data-path="C-csrf.html">
            
                <a href="C-csrf.html">
            
                    
                    C.15. CSRF
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="5.1.16" data-path="C-secure-middleware.html">
            
                <a href="C-secure-middleware.html">
            
                    
                    C.16. Secure Middleware
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="5.1.17" data-path="C-http-gzip-compression.html">
            
                <a href="C-http-gzip-compression.html">
            
                    
                    C.17. HTTP Gzip Compression (gziphandler)
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="5.1.18" data-path="C-send-email.html">
            
                <a href="C-send-email.html">
            
                    
                    C.18. Send Mail (net/smtp, Gomail v2)
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="5.1.19" data-path="C-read-write-excel-xlsx-file.html">
            
                <a href="C-read-write-excel-xlsx-file.html">
            
                    
                    C.19. Read &amp; Write Excel XLSX File (Excelize)
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="5.1.20" data-path="C-write-pdf-file.html">
            
                <a href="C-write-pdf-file.html">
            
                    
                    C.20. Write PDF File (gofpdf)
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="5.1.21" data-path="C-convert-html-to-pdf.html">
            
                <a href="C-convert-html-to-pdf.html">
            
                    
                    C.21. Convert HTML to PDF (go-wkhtmltopdf)
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="5.1.22" data-path="C-scraping-parsing-html.html">
            
                <a href="C-scraping-parsing-html.html">
            
                    
                    C.22. Scraping &amp; Parsing HTML (goquery)
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="5.1.23" data-path="C-xml-parser.html">
            
                <a href="C-xml-parser.html">
            
                    
                    C.23. Parse &amp; Generate XML (etree)
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="5.1.24" data-path="C-https-tls.html">
            
                <a href="C-https-tls.html">
            
                    
                    C.24. HTTPS/TLS Web Server
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="5.1.25" data-path="C-http2-server-push.html">
            
                <a href="C-http2-server-push.html">
            
                    
                    C.25. HTTP/2 &amp; HTTP/2 Server Push
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="5.1.26" data-path="C-client-http-request-advanced.html">
            
                <a href="C-client-http-request-advanced.html">
            
                    
                    C.26. Advanced Client HTTP Request
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="5.1.27" data-path="C-secure-insecure-client-http-request.html">
            
                <a href="C-secure-insecure-client-http-request.html">
            
                    
                    C.27. Secure &amp; Insecure Client HTTP Request
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="5.1.28" data-path="C-golang-ftp.html">
            
                <a href="C-golang-ftp.html">
            
                    
                    C.28. FTP
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="5.1.29" data-path="C-golang-ssh-sftp.html">
            
                <a href="C-golang-ssh-sftp.html">
            
                    
                    C.29. SSH &amp; SFTP
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="5.1.30" data-path="C-golang-protobuf-implementation.html">
            
                <a href="C-golang-protobuf-implementation.html">
            
                    
                    C.30. Protobuf
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="5.1.31" data-path="C-golang-grpc-protobuf.html">
            
                <a href="C-golang-grpc-protobuf.html">
            
                    
                    C.31. gRPC + Protobuf
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="5.1.32" data-path="C-golang-jwt.html">
            
                <a href="C-golang-jwt.html">
            
                    
                    C.32. JSON Web Token (JWT)
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="5.1.33" data-path="C-golang-ldap-authentication.html">
            
                <a href="C-golang-ldap-authentication.html">
            
                    
                    C.33. LDAP Authentication
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="5.1.34" data-path="C-golang-sso-saml-sp.html">
            
                <a href="C-golang-sso-saml-sp.html">
            
                    
                    C.34. SSO SAML (Service Provider)
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="5.1.35" data-path="C-dockerize-golang.html">
            
                <a href="C-dockerize-golang.html">
            
                    
                    C.35. Dockerize Aplikasi Golang
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="5.1.36" data-path="C-golang-redis.html">
            
                <a href="C-golang-redis.html">
            
                    
                    C.36. Redis
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="5.1.37" data-path="C-singleflight.html">
            
                <a href="C-singleflight.html">
            
                    
                    C.37. Singleflight
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="5.1.38" data-path="C-golang-aws-s3.html">
            
                <a href="C-golang-aws-s3.html">
            
                    
                    C.38. AWS S3
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

    
        
        <li class="divider"></li>
        
        
    
        <li class="chapter " data-level="6.1">
            
                <span>
            
                    
                    D. Studi Kasus
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="6.1.1" data-path="D-insert-1mil-csv-record-into-db-in-a-minute.html">
            
                <a href="D-insert-1mil-csv-record-into-db-in-a-minute.html">
            
                    
                    D.1. Insert 1 Juta Data dari File CSV Ke Database Server, Menggunakan Teknik Worker Pool, Database Connection Pool, dan Mekanisme Failover
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="6.1.2" data-path="D-google-api-search.html">
            
                <a href="D-google-api-search.html">
            
                    
                    D.2. Google API Search Dengan Timeout
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="6.1.3" data-path="D-golang-web-socket-chatting-app.html">
            
                <a href="D-golang-web-socket-chatting-app.html">
            
                    
                    D.3. Web Socket: Chatting App
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

    

    <li class="divider"></li>

    <li>
        <a href="https://www.gitbook.com" target="blank" class="gitbook-link">
            Published with GitBook
        </a>
    </li>
</ul>


                </nav>
            
        
    </div>

    <div class="book-body">
        
            <div class="body-inner">
                
                    

<div class="book-header" role="navigation">
    

    <!-- Title -->
    <h1>
        <i class="fa fa-circle-o-notch fa-spin"></i>
        <a href=".">C.13. Session (Gorilla Session)</a>
    </h1>
</div>




                    <div class="page-wrapper" tabindex="-1" role="main">
                        <div class="page-inner">
                            
                                <section class="normal markdown-section">
                                
                                <h1 id="c13-session-gorilla-session">C.13. Session (Gorilla Session)</h1>
<p>Session adalah sebuah konsep penyimpanan data yang shared antar http request. Session umumnya menggunakan cookie untuk menyimpan identifier (kita sebut sebagai <strong>SessionID</strong>). Informasi SessionID tersebut ber-asosiasi dengan data (kita sebut sebagai <strong>SessionData</strong>) yang disimpan di sisi back end dalam media tertentu.</p>
<p>Di back end, SessionData disimpan dalam media database, atau memory, atau fasilitas penyimpanan lainnya. Bisa saja sebenarnya jika SessionData juga disimpan dalam cookie, dengan memanfaatkan secure cookie maka SessionData tersebut ter-enkripsi dan aman dari peretas. Memang aman, tapi jelasnya lebih aman kalau disimpan di sisi server.</p>
<p>Pada chapter ini kita akan mempelajari penerapan session di golang menggunakan beberapa jenis media penyimpanan, yaitu mongo db, postgres sql db, dan secure cookie.</p>
<h2 id="c131-manage-session-menggunakan-gorilla-sessions">C.13.1. Manage Session Menggunakan Gorilla Sessions</h2>
<p><a href="https://github.com/gorilla/sessions" target="_blank">Gorilla Sessions</a> adalah library untuk manajemen session di golang. </p>
<p>Gorilla menyediakan interface <code>sessions.Store</code>, lewat interface ini kita bisa mengakses 3 buah method penting untuk manage session. Store sendiri adalah representasi dari media penyimpanan di back end, bisa berupa database, memory, atau lainnya. Objek store dibuat oleh library lain yang merupakan implementasi dari interface store itu sendiri.</p>
<p>Kembali ke pembahasan mengenai store, 3 buah method yang dimaksud adalah berikut:</p>
<ul>
<li>Method <code>.Get(r *http.Request, name string) (*Session, error)</code>, mengembalikan objek session. Jika session yang dengan <code>name</code> yang dicari tidak ada, maka objek session baru dikembalikan.</li>
<li>Method <code>.New(r *http.Request, name string) (*Session, error)</code>, mengembalikan objek session baru.</li>
<li>Method <code>.Save(r *http.Request, w http.ResponseWriter, s *Session) error</code>, digunakan untuk menyimpan session baru.</li>
</ul>
<p>Dari ketiga method di-atas saya rasa cukup jelas sekilas bagaimana cara mengakses, membuat, dan menyimpan session.</p>
<blockquote>
<p>Kita akan fokus membahas API milik interface <code>sessions.Store</code> dahulu, mengenai pembuatan store sendiri ada di pembahasan setelahnya.</p>
</blockquote>
<p>Lalu bagaimana dengan operasi hapus/delete? Seperti yang sudah dijelaskan sebelumnya, informasi session dipisah menjadi dua, pertama adalah SessionID yang disimpan di cookie, dan kedua adalah SessionData yang disimpan di back end. Cara untuk menghapus session adalah cukup dengan meng-expired-kan cookie yang menyimpan SessionID.</p>
<p>Cookie merupakan salah satu header pada http request, operasi yang berhubungan dengan cookie pasti membutuhkan objek <code>http.Request</code> dan <code>http.ResponseWriter</code>. Jika menggunakan echo, kedua objek tersebut bisa diakses lewat objek http context <code>echo.Context</code>.</p>
<h2 id="c132-membuat-objek-session-baru">C.13.2. Membuat Objek Session Baru</h2>
<p>Berikut adalah contoh cara membuat session lewat store.</p>
<pre><code class="lang-go">e.GET(<span class="hljs-string">&quot;/set&quot;</span>, <span class="hljs-keyword">func</span>(c echo.Context) error {
    session, _ := store.Get(c.Request(), SESSION_ID)
    session.Values[<span class="hljs-string">&quot;message1&quot;</span>] = <span class="hljs-string">&quot;hello&quot;</span>
    session.Values[<span class="hljs-string">&quot;message2&quot;</span>] = <span class="hljs-string">&quot;world&quot;</span>
    session.Save(c.Request(), c.Response())

    <span class="hljs-keyword">return</span> c.Redirect(http.StatusTemporaryRedirect, <span class="hljs-string">&quot;/get&quot;</span>)
})
</code></pre>
<p>Statement <code>store.Get()</code> mengembalikan dua objek dengan tipe <code>session.Session</code> dan <code>error</code>. Pemanggilan method ini memerlukan dua buah parameter untuk disisipkan, yaitu objek http request, dan nama/key SessionID yang disiapkan di konstanta <code>SESSION_ID</code>. Method <code>.Get()</code> ini akan selalu mengembalikan objek session, ada ataupun tidak ada session yang dicari, objek session tetap dikembalikan.</p>
<blockquote>
<p>Pembuatan objek session baru bisa dilakukan lewat <code>store.New()</code> maupun <code>store.Get()</code>.</p>
</blockquote>
<p>Dari objek session, akses property mutable <code>.Values</code> untuk mengambil ataupun mengisi data session. Objek ini bertipe <code>map[interface{}]interface{}</code>, berarti SessionData yang akan disimpan juga harus memiliki identifier.</p>
<p>Pada contoh di atas, dua buah data bertipe string disimpan, dengan identifier data yang juga string.</p>
<ul>
<li>SessionData <code>&quot;hello&quot;</code> disimpan dengan identifier adalah <code>message1</code>.</li>
<li>SessionData <code>&quot;world&quot;</code> disimpan dengan identifier adalah <code>message2</code>.</li>
</ul>
<p>Cara menyimpan session adalah dengan memanggil method <code>.Save()</code> milik objek session, dengan parameter adalah http request dan response.</p>
<h2 id="c133-mengakses-sessiondata">C.13.3. Mengakses SessionData</h2>
<p>SessionData diakses dari objek session, berikut merupakan contoh caranya.</p>
<pre><code class="lang-go">e.GET(<span class="hljs-string">&quot;/get&quot;</span>, <span class="hljs-keyword">func</span>(c echo.Context) error {
    session, _ := store.Get(c.Request(), SESSION_ID)

    <span class="hljs-keyword">if</span> <span class="hljs-built_in">len</span>(session.Values) == <span class="hljs-number">0</span> {
        <span class="hljs-keyword">return</span> c.String(http.StatusOK, <span class="hljs-string">&quot;empty result&quot;</span>)
    }

    <span class="hljs-keyword">return</span> c.String(http.StatusOK, fmt.Sprintf(
        <span class="hljs-string">&quot;%s %s&quot;</span>,
        session.Values[<span class="hljs-string">&quot;message1&quot;</span>],
        session.Values[<span class="hljs-string">&quot;message2&quot;</span>],
    ))
})
</code></pre>
<p>Seperti yang sudah dibahas di atas, objek <code>session</code> kembalian <code>store.Get()</code> TIDAK akan pernah berisi <code>nil</code>. Ada atau tidak, objek session selalu dikembalikan. </p>
<p>Dari objek session dilakukan pengecekan ada tidaknya SessionData, caranya dengan cara menghitung isi property <code>.Values</code> yang tipenya <code>map</code>. Jika isinya kosong maka session belum ada (atau mungkin ada hanya saja expired, atau bisa saja ada tapi invalid).</p>
<p>Pada kode di atas, jika SessionData kosong maka string <code>empty result</code> ditampilkan ke layar. Sedangkan jika ada, maka kedua SessionData (message1 dan message2) diambil lalu ditampilkan.</p>
<h2 id="c134-menghapus-session">C.13.4. Menghapus Session</h2>
<p>Cara menghapus session adalah dengan meng-expired-kan max age cookie-nya. Property max age bisa diakses lewat <code>session.Options.MaxAge</code>.</p>
<pre><code class="lang-go">e.GET(<span class="hljs-string">&quot;/delete&quot;</span>, <span class="hljs-keyword">func</span>(c echo.Context) error {
    session, _ := store.Get(c.Request(), SESSION_ID)
    session.Options.MaxAge = <span class="hljs-number">-1</span>
    session.Save(c.Request(), c.Response())

    <span class="hljs-keyword">return</span> c.Redirect(http.StatusTemporaryRedirect, <span class="hljs-string">&quot;/get&quot;</span>)
})
</code></pre>
<p>Isi dengan <code>-1</code> agar expired, lalu simpan ulang kembali session-nya.</p>
<h2 id="c135-session-store-dan-context-clear-handler">C.13.5. Session Store dan Context Clear Handler</h2>
<p>Session Store adalah representasi dari media tempat di mana data asli session disimpan. Gorilla menyediakan <code>CookieStore</code>, penyimpanan data asli pada store ini adalah juga di dalam cookie, namun di-encode dan di-enkripsi menggunakan <a href="https://github.com/gorilla/securecookie" target="_blank">Securecookie</a>.</p>
<p>Selain CookieStore, ada banyak store lain yang bisa kita gunakan. Komunitas begitu baik telah menyediakan berbagai macam store berikut.</p>
<ul>
<li><a href="https://github.com/starJammer/gorilla-sessions-arangodb" target="_blank">github.com/starJammer/gorilla-sessions-arangodb</a> - ArangoDB</li>
<li><a href="https://github.com/yosssi/boltstore" target="_blank">github.com/yosssi/boltstore</a> - Bolt</li>
<li><a href="https://github.com/srinathgs/couchbasestore" target="_blank">github.com/srinathgs/couchbasestore</a> - Couchbase</li>
<li><a href="https://github.com/denizeren/dynamostore" target="_blank">github.com/denizeren/dynamostore</a> - Dynamodb on AWS</li>
<li><a href="https://github.com/savaki/dynastore" target="_blank">github.com/savaki/dynastore</a> - DynamoDB on AWS (Official AWS library)</li>
<li><a href="https://github.com/bradleypeabody/gorilla-sessions-memcache" target="_blank">github.com/bradleypeabody/gorilla-sessions-memcache</a> - Memcache</li>
<li><a href="https://github.com/dsoprea/go-appengine-sessioncascade" target="_blank">github.com/dsoprea/go-appengine-sessioncascade</a> - Memcache/Datastore/Context in AppEngine</li>
<li><a href="https://github.com/kidstuff/mongostore" target="_blank">github.com/kidstuff/mongostore</a> - MongoDB</li>
<li><a href="https://github.com/srinathgs/mysqlstore" target="_blank">github.com/srinathgs/mysqlstore</a> - MySQL</li>
<li><a href="https://github.com/EnumApps/clustersqlstore" target="_blank">github.com/EnumApps/clustersqlstore</a> - MySQL Cluster</li>
<li><a href="https://github.com/antonlindstrom/pgstore" target="_blank">github.com/antonlindstrom/pgstore</a> - PostgreSQL</li>
<li><a href="https://github.com/boj/redistore" target="_blank">github.com/boj/redistore</a> - Redis</li>
<li><a href="https://github.com/boj/rethinkstore" target="_blank">github.com/boj/rethinkstore</a> - RethinkDB</li>
<li><a href="https://github.com/boj/riakstore" target="_blank">github.com/boj/riakstore</a> - Riak</li>
<li><a href="https://github.com/michaeljs1990/sqlitestore" target="_blank">github.com/michaeljs1990/sqlitestore</a> - SQLite</li>
<li><a href="https://github.com/wader/gormstore" target="_blank">github.com/wader/gormstore</a> - GORM (MySQL, PostgreSQL, SQLite)</li>
<li><a href="https://github.com/gernest/qlstore" target="_blank">github.com/gernest/qlstore</a> - ql</li>
<li><a href="https://github.com/quasoft/memstore" target="_blank">github.com/quasoft/memstore</a> - In-memory implementation for use in unit tests</li>
<li><a href="https://github.com/lafriks/xormstore" target="_blank">github.com/lafriks/xormstore</a> - XORM (MySQL, PostgreSQL, SQLite, Microsoft SQL Server, TiDB)</li>
</ul>
<p>Objek store dibuat sekali di awal (atau bisa saja berkali-kali di tiap handler, tergantung kebutuhan). Pada pembuatan objek store, umumya ada beberapa konfigurasi yang perlu disiapkan dan dua buah keys: authentication key dan encryption key.</p>
<p>Dari objek store tersebut, dalam handler, kita bisa mengakses objek session dengan menyisipkan context http request. Silakan lihat kode berikut untuk lebih jelasnya. Store direpresentasikan oleh variabel objek <code>store</code>.</p>
<pre><code class="lang-go"><span class="hljs-keyword">package</span> main

<span class="hljs-keyword">import</span> (
    <span class="hljs-string">&quot;fmt&quot;</span>
    <span class="hljs-string">&quot;github.com/gorilla/context&quot;</span>
    <span class="hljs-string">&quot;github.com/gorilla/sessions&quot;</span>
    <span class="hljs-string">&quot;github.com/labstack/echo&quot;</span>
    <span class="hljs-string">&quot;net/http&quot;</span>
)

<span class="hljs-keyword">const</span> SESSION_ID = <span class="hljs-string">&quot;id&quot;</span>

<span class="hljs-keyword">func</span> main() {
    store := newMongoStore()

    e := echo.New()

    e.Use(echo.WrapMiddleware(context.ClearHandler))

    e.GET(<span class="hljs-string">&quot;/set&quot;</span>, <span class="hljs-keyword">func</span>(c echo.Context) error {
        session, _ := store.Get(c.Request(), SESSION_ID)
        session.Values[<span class="hljs-string">&quot;message1&quot;</span>] = <span class="hljs-string">&quot;hello&quot;</span>
        session.Values[<span class="hljs-string">&quot;message2&quot;</span>] = <span class="hljs-string">&quot;world&quot;</span>
        session.Save(c.Request(), c.Response())

        <span class="hljs-keyword">return</span> c.Redirect(http.StatusTemporaryRedirect, <span class="hljs-string">&quot;/get&quot;</span>)
    })

    <span class="hljs-comment">// ...</span>
</code></pre>
<p>Sesuai dengan README Gorilla Session, library ini jika digabung dengan library lain selain gorilla mux, akan berpotensi menyebabkan memory leak. Untuk mengcover isu ini maka middleware <code>context.ClearHandler</code> perlu diregistrasikan. Middleware tersebut berada dalam library <a href="https://github.com/gorilla/context" target="_blank">Gorilla Context</a>.</p>
<h2 id="c136-mongo-db-store">C.13.6. Mongo DB Store</h2>
<p>Kita akan mempelajari pembuatan session store dengan media adalah mongo db. Sebelum kita mulai, ada dua library yang perlu di <code>go get</code>.</p>
<ul>
<li><a href="https://gopkg.in/mgo.v2" target="_blank">gopkg.in/mgo.v2</a></li>
<li><a href="https://github.com/kidstuff/mongostore" target="_blank">github.com/kidstuff/mongostore</a></li>
</ul>
<p>Library pertama, <code>mgo.v2</code> merupakan driver mongo db untuk golang. Koneksi dari golang ke mongodb akan kita buat lewat API library ini.</p>
<p>Library kedua, merupakan implementasi dari interface <code>sessions.Store</code> untuk mongo db.</p>
<p>Silakan kombinasikan semua koding yang sudah kita tulis di atas agar menjadi satu aplikasi. Lalu buat fungsi <code>newMongoStore()</code>.</p>
<pre><code class="lang-go"><span class="hljs-keyword">import</span> (
    <span class="hljs-string">&quot;fmt&quot;</span>
    <span class="hljs-string">&quot;github.com/gorilla/context&quot;</span>
    <span class="hljs-string">&quot;github.com/kidstuff/mongostore&quot;</span>
    <span class="hljs-string">&quot;github.com/labstack/echo&quot;</span>
    <span class="hljs-string">&quot;gopkg.in/mgo.v2&quot;</span>
    <span class="hljs-string">&quot;log&quot;</span>
    <span class="hljs-string">&quot;net/http&quot;</span>
    <span class="hljs-string">&quot;os&quot;</span>
)

<span class="hljs-comment">// ...</span>

<span class="hljs-keyword">func</span> newMongoStore() *mongostore.MongoStore {
    mgoSession, err := mgo.Dial(<span class="hljs-string">&quot;localhost:27123&quot;</span>)
    <span class="hljs-keyword">if</span> err != <span class="hljs-literal">nil</span> {
        log.Println(<span class="hljs-string">&quot;ERROR&quot;</span>, err)
        os.Exit(<span class="hljs-number">0</span>)
    }

    dbCollection := mgoSession.DB(<span class="hljs-string">&quot;learnwebgolang&quot;</span>).C(<span class="hljs-string">&quot;session&quot;</span>)
    maxAge := <span class="hljs-number">86400</span> * <span class="hljs-number">7</span>
    ensureTTL := <span class="hljs-literal">true</span>
    authKey := []<span class="hljs-keyword">byte</span>(<span class="hljs-string">&quot;my-auth-key-very-secret&quot;</span>)
    encryptionKey := []<span class="hljs-keyword">byte</span>(<span class="hljs-string">&quot;my-encryption-key-very-secret123&quot;</span>)

    store := mongostore.NewMongoStore(
        dbCollection,
        maxAge,
        ensureTTL,
        authKey,
        encryptionKey,
    )
    <span class="hljs-keyword">return</span> store
}
</code></pre>
<p>Statement <code>mgo.Dial()</code> digunakan untuk terhubung dengan mongo db server. Method dial mengembalikan dua objek, salah satunya adalah mgo session.</p>
<blockquote>
<p>Pada saat pembuatan buku ini, penulis menggunakan mongo db server yang up pada port <code>27123</code>, silakan menyesuaikan connection string dengan credentials mongo db yang digunakan.</p>
</blockquote>
<p>Dari mgo session akses database lewat method <code>.DB()</code>, lalu akses collection yang ingin digunakan sebagai media penyimpanan data asli session lewat method <code>.C()</code>.</p>
<p>Statement <code>mongostore.NewMongoStore()</code> digunakan untuk membuat mongo db store. Ada beberapa parameter yang diperlukan: objek collection mongo di atas, dan dua lagi lainnya adalah authentication key dan encryption key.</p>
<p>Jika pembaca merasa bingung, silakan langsung buka <a href="https://github.com/novalagung/dasarpemrogramangolang-example/" target="_blank">source code untuk chapter ini di Github</a>, mungkin membantu.</p>
<h2 id="c137-postgres-sql-store">C.13.7. Postgres SQL Store</h2>
<p>Pembuatan postgres store caranya kurang lebih sama dengan mongo store. Library yang dipakai adalah <a href="https://github.com/antonlindstrom/pgstore" target="_blank">github.com/antonlindstrom/pgstore</a>.</p>
<p>Gunakan <code>pgstore.NewPGStore()</code> untuk membuat store. Isi parameter pertama dengan connection string postgres server, lalu authentication key dan encryption key.</p>
<pre><code class="lang-go"><span class="hljs-keyword">import</span> (
    <span class="hljs-string">&quot;fmt&quot;</span>
    <span class="hljs-string">&quot;github.com/antonlindstrom/pgstore&quot;</span>
    <span class="hljs-string">&quot;github.com/gorilla/context&quot;</span>
    <span class="hljs-string">&quot;github.com/labstack/echo&quot;</span>
    <span class="hljs-string">&quot;log&quot;</span>
    <span class="hljs-string">&quot;net/http&quot;</span>
    <span class="hljs-string">&quot;os&quot;</span>
)

<span class="hljs-comment">// ...</span>

<span class="hljs-keyword">func</span> newPostgresStore() *pgstore.PGStore {
    url := <span class="hljs-string">&quot;postgres://novalagung:@127.0.0.1:5432/novalagung?sslmode=disable&quot;</span>
    authKey := []<span class="hljs-keyword">byte</span>(<span class="hljs-string">&quot;my-auth-key-very-secret&quot;</span>)
    encryptionKey := []<span class="hljs-keyword">byte</span>(<span class="hljs-string">&quot;my-encryption-key-very-secret123&quot;</span>)

    store, err := pgstore.NewPGStore(url, authKey, encryptionKey)
    <span class="hljs-keyword">if</span> err != <span class="hljs-literal">nil</span> {
        log.Println(<span class="hljs-string">&quot;ERROR&quot;</span>, err)
        os.Exit(<span class="hljs-number">0</span>)
    }

    <span class="hljs-keyword">return</span> store
}
</code></pre>
<h2 id="c138-secure-cookie-store">C.13.8. Secure Cookie Store</h2>
<p>Penggunaan cookie store kurang penulis anjurkan, meski sebenarnya cukup aman. Implementasi store jenis ini adalah yang paling mudah, karena tidak butuh database server atau media lainnya; dan juga karena API untuk cookie store sudah tersedia dalam gorilla sessions secara default.</p>
<pre><code class="lang-go"><span class="hljs-keyword">import</span> (
    <span class="hljs-string">&quot;fmt&quot;</span>
    <span class="hljs-string">&quot;github.com/gorilla/context&quot;</span>
    <span class="hljs-string">&quot;github.com/gorilla/sessions&quot;</span>
    <span class="hljs-string">&quot;github.com/labstack/echo&quot;</span>
    <span class="hljs-string">&quot;net/http&quot;</span>
)

<span class="hljs-comment">// ...</span>

<span class="hljs-keyword">func</span> newCookieStore() *sessions.CookieStore {
    authKey := []<span class="hljs-keyword">byte</span>(<span class="hljs-string">&quot;my-auth-key-very-secret&quot;</span>)
    encryptionKey := []<span class="hljs-keyword">byte</span>(<span class="hljs-string">&quot;my-encryption-key-very-secret123&quot;</span>)

    store := sessions.NewCookieStore(authKey, encryptionKey)
    store.Options.Path = <span class="hljs-string">&quot;/&quot;</span>
    store.Options.MaxAge = <span class="hljs-number">86400</span> * <span class="hljs-number">7</span>
    store.Options.HttpOnly = <span class="hljs-literal">true</span>

    <span class="hljs-keyword">return</span> store
}
</code></pre>
<p>Tentukan path dan default max age cookie lewat <code>store.Options</code>.</p>
<h2 id="c139-test-aplikasi">C.13.9. Test Aplikasi</h2>
<p>Silakan gabung semua kode yang sudah kita pelajari (kecuali bagian store), lalu pilih salah satu implementasi store di atas. Jalankan aplikasi untuk testing.</p>
<p>Tujuan dari kode yang kita tulis kurang lebih sebagai berikut.</p>
<ol>
<li>Ketika <code>/get</code> diakses untuk pertama kali, <code>empty result</code> muncul, tidak ada data session yang disimpan sebelumnya.</li>
<li>Rute <code>/set</code> diakses, lalu sebuah session disimpan, dari rute ini pengguna di-redirect ke <code>/get</code>, sebuah pesan muncul yang sumber datanya tak lain adalah dari session.</li>
<li>Rute <code>/delete</code> diakses, session dihapus, lalu di-redirect lagi ke <code>/get</code>, pesan <code>empty result</code> muncul kembali karena session sudah tidak ada (dihapus).</li>
</ol>
<p><img src="images/C_session_1_test.png" alt="Dasar Pemrograman Golang - Session Test"></p>
<hr>
<ul>
<li><a href="https://github.com/labstack/echo" target="_blank">Echo</a>, by Vishal Rana (Lab Stack), MIT license</li>
<li><a href="https://github.com/gorilla/sessions" target="_blank">Gorilla Sessions</a>, by Gorilla web toolkit team, BSD-3-Clause license</li>
<li><a href="https://github.com/gorilla/context" target="_blank">Gorilla Context</a>, by Gorilla web toolkit team, BSD-3-Clause license</li>
<li><a href="https://github.com/gorilla/securecookie" target="_blank">Gorilla Securecookie</a>, by Gorilla web toolkit team, BSD-3-Clause license</li>
<li><a href="https://github.com/antonlindstrom/pgstore" target="_blank">PG Store</a>, by Anton Lindstr&#xF6;m, MIT License</li>
<li><a href="https://github.com/kidstuff/mongostore" target="_blank">Mongo Store</a>, by Nguy&#x1EC5;n V&#x103;n Cao Nguy&#xEA;n, BSD-3-Clause License</li>
<li><a href="https://labix.org/mgo" target="_blank">Mgo v2, Golang Mongo Driver</a>, by Gustavo Niemeyer, Simplified BSD License</li>
</ul>
<hr>
<div class="source-code-link">
    <div class="source-code-link-message">Source code praktek chapter ini tersedia di Github</div>
    <a href="https://github.com/novalagung/dasarpemrogramangolang-example/tree/master/chapter-C.13-session" target="_blank">https://github.com/novalagung/dasarpemrogramangolang-example/.../chapter-C.13...</a>
</div>

<hr>
<iframe src="https://novalagung.substack.com/embed" width="100%" height="320" class="substack-embed" frameborder="0" scrolling="no"></iframe>

                                
                                </section>
                            
                        </div>
                    </div>
                
            </div>

            
                
                <a href="C-securecookie.html" class="navigation navigation-prev " aria-label="Previous page: C.12. Secure Cookie (Gorilla Securecookie)">
                    <i class="fa fa-angle-left"></i>
                </a>
                
                
                <a href="C-cors-preflight-request.html" class="navigation navigation-next " aria-label="Next page: C.14. CORS &amp; Preflight Request">
                    <i class="fa fa-angle-right"></i>
                </a>
                
            
        
    </div>

    <script>
        var gitbook = gitbook || [];
        gitbook.push(function() {
            gitbook.page.hasChanged({"page":{"title":"C.13. Session (Gorilla Session)","level":"5.1.13","depth":2,"next":{"title":"C.14. CORS & Preflight Request","level":"5.1.14","depth":2,"path":"C-cors-preflight-request.md","ref":"C-cors-preflight-request.md","articles":[]},"previous":{"title":"C.12. Secure Cookie (Gorilla Securecookie)","level":"5.1.12","depth":2,"path":"C-securecookie.md","ref":"C-securecookie.md","articles":[]},"dir":"ltr"},"config":{"gitbook":"*","theme":"default","variables":{},"plugins":["-search","-lunr","docsearch-v3","disqus","meta","sitemap"],"pluginsConfig":{"docsearch":{"appId":"ZV0MXP90GF","apiKey":"f7431c709385fe300da4c2ef2093c43c","indexName":"dasarpemrogramangolang-novalagung"},"disqus":{"useIdentifier":false,"shortName":"dasarpemrogramangolang"},"meta":{"name":"","content":"","data":[{"name":"google-site-verification","content":"UZnxS2Dk3fm2_Elms3a__56Q_oQ3sQ1h0SVXXlHSmbE"},{"name":"og:image","content":"https://dasarpemrogramangolang.novalagung.com/images/cover_fb_share.jpg"},{"name":"twitter:image","content":"https://dasarpemrogramangolang.novalagung.com/images/cover_fb_share.jpg"}]},"docsearch-v3":{},"fontsettings":{"theme":"white","family":"sans","size":2},"highlight":{},"sitemap":{"hostname":"https://dasarpemrogramangolang.novalagung.com/"},"sharing":{"facebook":true,"twitter":true,"google":false,"weibo":false,"instapaper":false,"vk":false,"all":["facebook","google","twitter","weibo","instapaper"]},"theme-default":{"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"showLevel":false}},"structure":{"langs":"LANGS.md","readme":"README.md","glossary":"GLOSSARY.md","summary":"SUMMARY.md"},"pdf":{"pageNumbers":true,"fontSize":12,"fontFamily":"Arial","paperSize":"a4","chapterMark":"pagebreak","pageBreaksBefore":"/","margin":{"right":62,"left":62,"top":56,"bottom":56}},"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"}},"file":{"path":"C-session.md","mtime":"2023-07-06T13:18:54.298Z","type":"markdown"},"gitbook":{"version":"3.2.3","time":"2023-07-06T13:19:57.846Z"},"basePath":".","book":{"language":""}});
        });
    </script>
</div>

        
    <script src="gitbook/gitbook.js"></script>
    <script src="gitbook/theme.js"></script>
    
        
        <script src="https://cdn.jsdelivr.net/npm/@docsearch/js@3"></script>
        
    
        
        <script src="gitbook/gitbook-plugin-docsearch-v3/init.js"></script>
        
    
        
        <script src="https://cdnjs.cloudflare.com/ajax/libs/URI.js/1.16.1/URI.min.js"></script>
        
    
        
        <script src="gitbook/gitbook-plugin-disqus/plugin.js"></script>
        
    
        
        <script src="gitbook/gitbook-plugin-sharing/buttons.js"></script>
        
    
        
        <script src="gitbook/gitbook-plugin-fontsettings/fontsettings.js"></script>
        
    

    <div style="position: fixed; top: 10px; right: 30px; padding: 10px; background-color: rgba(255, 255, 255, 0.7);"><a class="github-button" href="https://github.com/novalagung/dasarpemrogramangolang" data-icon="octicon-star" data-size="large" data-show-count="true" aria-label="Star novalagung/dasarpemrogramangolang on GitHub">Star</a>&nbsp;<a class="github-button" href="https://github.com/novalagung" data-size="large" aria-label="Follow @novalagung on GitHub">Follow @novalagung</a><script async defer src="https://buttons.github.io/buttons.js"></script></div></body>
</html>