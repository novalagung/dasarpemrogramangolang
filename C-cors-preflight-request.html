<!DOCTYPE HTML>
<html lang="" >
    <head>
        <meta charset="UTF-8">
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <title>Golang CORS & Preflight Request - Dasar Pemrograman Golang</title>
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        
        <meta name="generator" content="GitBook 3.2.3">
        
        
        
    
    <link rel="stylesheet" href="gitbook/style.css">

    
            
                
                <link rel="stylesheet" href="gitbook/gitbook-plugin-disqus/plugin.css" media="print" onload="this.media='all'">
                
            
                
                <link rel="stylesheet" href="gitbook/gitbook-plugin-highlight/website.css" media="print" onload="this.media='all'">
                
            
                
                <link rel="stylesheet" href="gitbook/gitbook-plugin-search/search.css" media="print" onload="this.media='all'">
                
            
                
                <link rel="stylesheet" href="gitbook/gitbook-plugin-fontsettings/website.css" media="print" onload="this.media='all'">
                
            
        

    

    
        
    
        
    
        
    
        
    
        
    
        
    

        
    
    
    <meta  name="google-site-verification"  content="UZnxS2Dk3fm2_Elms3a__56Q_oQ3sQ1h0SVXXlHSmbE" >
    
    <meta  name="og:image"  content="https://dasarpemrogramangolang.novalagung.com/images/cover_fb_share.jpg" >
    
    <meta  name="twitter:image"  content="https://dasarpemrogramangolang.novalagung.com/images/cover_fb_share.jpg" >
    
    
    
    
    <meta name="HandheldFriendly" content="true"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <link rel="apple-touch-icon-precomposed" sizes="152x152" href="gitbook/images/apple-touch-icon-precomposed-152.png">
    <link rel="shortcut icon" href="gitbook/images/favicon.ico" type="image/x-icon">

    
    <link rel="next" href="C-csrf.html" />
    
    
    <link rel="prev" href="C-session.html" />
    


    <link rel="stylesheet" href="gitbook/adjustment.css?v=3.2022.12.04.085239"><script async defer src="https://buttons.github.io/buttons.js"></script><script async src="https://www.googletagmanager.com/gtag/js?id=G-MZ74P74K72"></script>
		<script>
			window.dataLayer = window.dataLayer || [];
			function gtag(){dataLayer.push(arguments);}
			gtag('js', new Date());
			gtag('config', 'G-MZ74P74K72');
		</script></head>
    <body>
        
<div class="book">
    <div class="book-summary">
        
            
<div id="book-search-input" role="search">
    <input type="text" placeholder="Type to search" />
</div>

            
                <nav role="navigation">
                


<ul class="summary">
    
    

    

    
        
        
    
        <li class="chapter " data-level="1.1" data-path="./">
            
                <a href="./">
            
                    
                    Dasar Pemrograman Golang
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2" >
            
                <a target="_blank" href="https://github.com/novalagung/dasarpemrogramangolang/raw/ebooks/dasarpemrogramangolang.pdf">
            
                    
                    Download versi PDF
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3" data-path="CONTRIBUTING.html">
            
                <a href="CONTRIBUTING.html">
            
                    
                    Author & Contributors
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4" data-path="LICENSE.html">
            
                <a href="LICENSE.html">
            
                    
                    Lisensi dan Distribusi Konten
            
                </a>
            

            
        </li>
    

    
        
        <li class="divider"></li>
        
        
    
        <li class="chapter " data-level="2.1" >
            
                <span>
            
                    
                    Dasar Pemrograman Rust (december release)
            
                </span>
            

            
        </li>
    
        <li class="chapter " data-level="2.2" >
            
                <a target="_blank" href="https://learndevops.novalagung.com/">
            
                    
                    E-book Learn DevOps
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.3" >
            
                <a target="_blank" href="https://www.udemy.com/course/praktis-belajar-docker-dan-kubernetes-untuk-pemula/?couponCode=FREE-100USERS">
            
                    
                    Udemy Course Praktis Belajar Docker & Kubernetes (Gratis untuk 100 peserta pertama di Desember 2022)
            
                </a>
            

            
        </li>
    

    
        
        <li class="divider"></li>
        
        
    
        <li class="chapter " data-level="3.1" >
            
                <span>
            
                    
                    A. Pemrograman Go Dasar
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="3.1.1" data-path="1-berkenalan-dengan-golang.html">
            
                <a href="1-berkenalan-dengan-golang.html">
            
                    
                    A.1. Belajar Golang
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.1.2" data-path="2-instalasi-golang.html">
            
                <a href="2-instalasi-golang.html">
            
                    
                    A.2. Instalasi Golang (Stable & Unstable)
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.1.3" data-path="A-setup-go-project-dengan-go-modules.html">
            
                <a href="A-setup-go-project-dengan-go-modules.html">
            
                    
                    A.3. Setup Go Modules
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.1.4" data-path="A-gopath-dan-workspace.html">
            
                <a href="A-gopath-dan-workspace.html">
            
                    
                    A.4. Setup GOPATH Dan Workspace
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.1.5" data-path="A-instalasi-editor.html">
            
                <a href="A-instalasi-editor.html">
            
                    
                    A.5. Instalasi Editor
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.1.6" data-path="A-go-command.html">
            
                <a href="A-go-command.html">
            
                    
                    A.6. Go Command
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.1.7" data-path="A-hello-world.html">
            
                <a href="A-hello-world.html">
            
                    
                    A.7. Program Pertama: Hello World
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.1.8" data-path="A-komentar.html">
            
                <a href="A-komentar.html">
            
                    
                    A.8. Komentar
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.1.9" data-path="A-variabel.html">
            
                <a href="A-variabel.html">
            
                    
                    A.9. Variabel
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.1.10" data-path="A-tipe-data.html">
            
                <a href="A-tipe-data.html">
            
                    
                    A.10. Tipe Data
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.1.11" data-path="A-konstanta.html">
            
                <a href="A-konstanta.html">
            
                    
                    A.11. Konstanta
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.1.12" data-path="A-operator.html">
            
                <a href="A-operator.html">
            
                    
                    A.12. Operator
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.1.13" data-path="A-seleksi-kondisi.html">
            
                <a href="A-seleksi-kondisi.html">
            
                    
                    A.13. Seleksi Kondisi
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.1.14" data-path="A-perulangan.html">
            
                <a href="A-perulangan.html">
            
                    
                    A.14. Perulangan
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.1.15" data-path="A-array.html">
            
                <a href="A-array.html">
            
                    
                    A.15. Array
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.1.16" data-path="A-slice.html">
            
                <a href="A-slice.html">
            
                    
                    A.16. Slice
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.1.17" data-path="A-map.html">
            
                <a href="A-map.html">
            
                    
                    A.17. Map
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.1.18" data-path="A-fungsi.html">
            
                <a href="A-fungsi.html">
            
                    
                    A.18. Fungsi
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.1.19" data-path="A-fungsi-multiple-return.html">
            
                <a href="A-fungsi-multiple-return.html">
            
                    
                    A.19. Fungsi Multiple Return
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.1.20" data-path="A-fungsi-variadic.html">
            
                <a href="A-fungsi-variadic.html">
            
                    
                    A.20. Fungsi Variadic
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.1.21" data-path="A-fungsi-closure.html">
            
                <a href="A-fungsi-closure.html">
            
                    
                    A.21. Fungsi Closure
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.1.22" data-path="A-fungsi-sebagai-parameter.html">
            
                <a href="A-fungsi-sebagai-parameter.html">
            
                    
                    A.22. Fungsi Sebagai parameter
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.1.23" data-path="A-pointer.html">
            
                <a href="A-pointer.html">
            
                    
                    A.23. Pointer
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.1.24" data-path="A-struct.html">
            
                <a href="A-struct.html">
            
                    
                    A.24. Struct
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.1.25" data-path="A-method.html">
            
                <a href="A-method.html">
            
                    
                    A.25. Method
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.1.26" data-path="A-properti-public-dan-private.html">
            
                <a href="A-properti-public-dan-private.html">
            
                    
                    A.26. Properti Public dan Private (Exported vs Unexported)
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.1.27" data-path="A-interface.html">
            
                <a href="A-interface.html">
            
                    
                    A.27. Interface
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.1.28" data-path="A-interface-kosong.html">
            
                <a href="A-interface-kosong.html">
            
                    
                    A.28. Interface Kosong (Any)
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.1.29" data-path="A-reflect.html">
            
                <a href="A-reflect.html">
            
                    
                    A.29. Reflect
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.1.30" data-path="A-goroutine.html">
            
                <a href="A-goroutine.html">
            
                    
                    A.30. Goroutine
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.1.31" data-path="A-channel.html">
            
                <a href="A-channel.html">
            
                    
                    A.31. Channel
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.1.32" data-path="A-buffered-channel.html">
            
                <a href="A-buffered-channel.html">
            
                    
                    A.32. Buffered Channel
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.1.33" data-path="A-channel-select.html">
            
                <a href="A-channel-select.html">
            
                    
                    A.33. Channel - Select
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.1.34" data-path="A-channel-range-close.html">
            
                <a href="A-channel-range-close.html">
            
                    
                    A.34. Channel - Range & Close
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.1.35" data-path="A-channel-timeout.html">
            
                <a href="A-channel-timeout.html">
            
                    
                    A.35. Channel - Timeout
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.1.36" data-path="A-defer-exit.html">
            
                <a href="A-defer-exit.html">
            
                    
                    A.36. Defer & Exit
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.1.37" data-path="A-error-panic-recover.html">
            
                <a href="A-error-panic-recover.html">
            
                    
                    A.37. Error, Panic, & Recover
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.1.38" data-path="A-string-format.html">
            
                <a href="A-string-format.html">
            
                    
                    A.38. Layout Format String
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.1.39" data-path="A-random.html">
            
                <a href="A-random.html">
            
                    
                    A.39. Random
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.1.40" data-path="A-time-parsing-format.html">
            
                <a href="A-time-parsing-format.html">
            
                    
                    A.40. Time, Parsing Time, & Format Time
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.1.41" data-path="A-timer-ticker-scheduler.html">
            
                <a href="A-timer-ticker-scheduler.html">
            
                    
                    A.41. Timer, Ticker, & Scheduler
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.1.42" data-path="A-time-duration.html">
            
                <a href="A-time-duration.html">
            
                    
                    A.42. Time Duration
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.1.43" data-path="A-data-type-conversion.html">
            
                <a href="A-data-type-conversion.html">
            
                    
                    A.43. Konversi Antar Tipe Data
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.1.44" data-path="A-strings.html">
            
                <a href="A-strings.html">
            
                    
                    A.44. Fungsi String
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.1.45" data-path="A-regex.html">
            
                <a href="A-regex.html">
            
                    
                    A.45. Regex
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.1.46" data-path="A-encoding-base64.html">
            
                <a href="A-encoding-base64.html">
            
                    
                    A.46. Encode - Decode Base64
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.1.47" data-path="A-hash-sha1.html">
            
                <a href="A-hash-sha1.html">
            
                    
                    A.47. Hash Sha1
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.1.48" data-path="A-command-line-args-flag.html">
            
                <a href="A-command-line-args-flag.html">
            
                    
                    A.48. Arguments & Flag
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.1.49" data-path="A-exec.html">
            
                <a href="A-exec.html">
            
                    
                    A.49. Exec
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.1.50" data-path="A-file.html">
            
                <a href="A-file.html">
            
                    
                    A.50. File
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.1.51" data-path="A-web-server.html">
            
                <a href="A-web-server.html">
            
                    
                    A.51. Web Server
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.1.52" data-path="A-url-parsing.html">
            
                <a href="A-url-parsing.html">
            
                    
                    A.52. URL Parsing
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.1.53" data-path="A-json.html">
            
                <a href="A-json.html">
            
                    
                    A.53. JSON Data
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.1.54" data-path="A-web-service-api.html">
            
                <a href="A-web-service-api.html">
            
                    
                    A.54. Web Service API Server
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.1.55" data-path="A-client-http-request-simple.html">
            
                <a href="A-client-http-request-simple.html">
            
                    
                    A.55. Simple Client HTTP Request
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.1.56" data-path="A-sql.html">
            
                <a href="A-sql.html">
            
                    
                    A.56. SQL
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.1.57" data-path="A-mongodb.html">
            
                <a href="A-mongodb.html">
            
                    
                    A.57. NoSQL MongoDB
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.1.58" data-path="A-unit-test.html">
            
                <a href="A-unit-test.html">
            
                    
                    A.58. Unit Test
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.1.59" data-path="A-waitgroup.html">
            
                <a href="A-waitgroup.html">
            
                    
                    A.59. sync.WaitGroup
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.1.60" data-path="A-mutex.html">
            
                <a href="A-mutex.html">
            
                    
                    A.60. sync.Mutex
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.1.61" data-path="A-go-vendoring.html">
            
                <a href="A-go-vendoring.html">
            
                    
                    A.61. Go Vendoring
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.1.62" data-path="A-concurrency-pipeline.html">
            
                <a href="A-concurrency-pipeline.html">
            
                    
                    A.62. Concurrency Pattern: Pipeline
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.1.63" data-path="A-simplified-fan-in-fan-out-pipeline.html">
            
                <a href="A-simplified-fan-in-fan-out-pipeline.html">
            
                    
                    A.63. Concurrency Pattern: Simplified Fan-in Fan-out Pipeline
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.1.64" data-path="A-pipeline-context-cancellation.html">
            
                <a href="A-pipeline-context-cancellation.html">
            
                    
                    A.64. Concurrency Pattern: Context Cancellation Pipeline
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.1.65" data-path="A-golang-generics.html">
            
                <a href="A-golang-generics.html">
            
                    
                    A.65. Go Generics
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

    
        
        <li class="divider"></li>
        
        
    
        <li class="chapter " data-level="4.1" >
            
                <span>
            
                    
                    B. Pemrograman Web Go Dasar
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="4.1.1" data-path="B-golang-web-hello-world.html">
            
                <a href="B-golang-web-hello-world.html">
            
                    
                    B.1. Golang Web App: Hello World
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="4.1.2" data-path="B-routing-http-handlefunc.html">
            
                <a href="B-routing-http-handlefunc.html">
            
                    
                    B.2. Routing http.HandleFunc
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="4.1.3" data-path="B-routing-static-assets.html">
            
                <a href="B-routing-static-assets.html">
            
                    
                    B.3. Routing Static Assets
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="4.1.4" data-path="B-template-render-html.html">
            
                <a href="B-template-render-html.html">
            
                    
                    B.4. Template: Render HTML Template
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="4.1.5" data-path="B-template-render-partial-html.html">
            
                <a href="B-template-render-partial-html.html">
            
                    
                    B.5. Template: Render Partial HTML Template
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="4.1.6" data-path="B-template-actions-variables.html">
            
                <a href="B-template-actions-variables.html">
            
                    
                    B.6. Template: Actions & Variables
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="4.1.7" data-path="B-template-functions.html">
            
                <a href="B-template-functions.html">
            
                    
                    B.7. Template: Functions
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="4.1.8" data-path="B-template-custom-functions.html">
            
                <a href="B-template-custom-functions.html">
            
                    
                    B.8. Template: Custom Functions
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="4.1.9" data-path="B-render-specific-html-template.html">
            
                <a href="B-render-specific-html-template.html">
            
                    
                    B.9. Template: Render Specific HTML Template
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="4.1.10" data-path="B-render-html-string.html">
            
                <a href="B-render-html-string.html">
            
                    
                    B.10. Template: Render HTML String
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="4.1.11" data-path="B-http-method-basic.html">
            
                <a href="B-http-method-basic.html">
            
                    
                    B.11. HTTP Method: POST & GET
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="4.1.12" data-path="B-form-value.html">
            
                <a href="B-form-value.html">
            
                    
                    B.12. Form Value
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="4.1.13" data-path="B-form-upload-file.html">
            
                <a href="B-form-upload-file.html">
            
                    
                    B.13. Form Upload File
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="4.1.14" data-path="B-ajax-json-payload.html">
            
                <a href="B-ajax-json-payload.html">
            
                    
                    B.14. AJAX JSON Payload
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="4.1.15" data-path="B-ajax-json-response.html">
            
                <a href="B-ajax-json-response.html">
            
                    
                    B.15. AJAX JSON Response
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="4.1.16" data-path="B-ajax-multi-upload.html">
            
                <a href="B-ajax-multi-upload.html">
            
                    
                    B.16. AJAX Multiple File Upload
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="4.1.17" data-path="B-download-file.html">
            
                <a href="B-download-file.html">
            
                    
                    B.17. Download File
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="4.1.18" data-path="B-http-basic-auth.html">
            
                <a href="B-http-basic-auth.html">
            
                    
                    B.18. HTTP Basic Auth
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="4.1.19" data-path="B-middleware-using-http-handler.html">
            
                <a href="B-middleware-using-http-handler.html">
            
                    
                    B.19. Middleware http.Handler
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="4.1.20" data-path="B-custom-mux-multiplexer.html">
            
                <a href="B-custom-mux-multiplexer.html">
            
                    
                    B.20. Custom Multiplexer
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="4.1.21" data-path="B-cookie.html">
            
                <a href="B-cookie.html">
            
                    
                    B.21. HTTP Cookie
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="4.1.22" data-path="B-simple-configuration.html">
            
                <a href="B-simple-configuration.html">
            
                    
                    B.22. Simple Configuration
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="4.1.23" data-path="B-server-handler-http-request-cancellation.html">
            
                <a href="B-server-handler-http-request-cancellation.html">
            
                    
                    B.23. Server Handler HTTP Request Cancellation
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

    
        
        <li class="divider"></li>
        
        
    
        <li class="chapter " data-level="5.1" >
            
                <span>
            
                    
                    C. Pemrograman Go Lanjut
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="5.1.1" data-path="C-project-layout-structure.html">
            
                <a href="C-project-layout-structure.html">
            
                    
                    C.1. Project Layout Structure
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="5.1.2" data-path="C-golang-web-framework.html">
            
                <a href="C-golang-web-framework.html">
            
                    
                    C.2. Go Web Framework
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="5.1.3" data-path="C-echo-routing.html">
            
                <a href="C-echo-routing.html">
            
                    
                    C.3. Echo Framework & Routing
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="5.1.4" data-path="C-parsing-http-request-payload-echo.html">
            
                <a href="C-parsing-http-request-payload-echo.html">
            
                    
                    C.4. Parsing HTTP Request Payload (Echo)
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="5.1.5" data-path="C-http-request-payload-validation.html">
            
                <a href="C-http-request-payload-validation.html">
            
                    
                    C.5. HTTP Request Payload Validation (Validator v9, Echo)
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="5.1.6" data-path="C-http-error-handling.html">
            
                <a href="C-http-error-handling.html">
            
                    
                    C.6. HTTP Error Handling (Validator v9, Echo)
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="5.1.7" data-path="C-echo-template-rendering.html">
            
                <a href="C-echo-template-rendering.html">
            
                    
                    C.7. Template Rendering in Echo
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="5.1.8" data-path="C-advanced-middleware-and-logging.html">
            
                <a href="C-advanced-middleware-and-logging.html">
            
                    
                    C.8. Advanced Middleware & Logging (Logrus, Echo Logger)
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="5.1.9" data-path="C-flag-parser.html">
            
                <a href="C-flag-parser.html">
            
                    
                    C.9. CLI Flag Parser (Kingpin)
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="5.1.10" data-path="C-advanced-configuration-viper.html">
            
                <a href="C-advanced-configuration-viper.html">
            
                    
                    C.10. Advanced Configuration: Viper
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="5.1.11" data-path="C-best-practice-configuration-env-var.html">
            
                <a href="C-best-practice-configuration-env-var.html">
            
                    
                    C.11. Best Practice Configuration: Environment Variable
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="5.1.12" data-path="C-securecookie.html">
            
                <a href="C-securecookie.html">
            
                    
                    C.12. Secure Cookie (Gorilla Securecookie)
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="5.1.13" data-path="C-session.html">
            
                <a href="C-session.html">
            
                    
                    C.13. Session (Gorilla Session)
            
                </a>
            

            
        </li>
    
        <li class="chapter active" data-level="5.1.14" data-path="C-cors-preflight-request.html">
            
                <a href="C-cors-preflight-request.html">
            
                    
                    C.14. CORS & Preflight Request
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="5.1.15" data-path="C-csrf.html">
            
                <a href="C-csrf.html">
            
                    
                    C.15. CSRF
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="5.1.16" data-path="C-secure-middleware.html">
            
                <a href="C-secure-middleware.html">
            
                    
                    C.16. Secure Middleware
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="5.1.17" data-path="C-http-gzip-compression.html">
            
                <a href="C-http-gzip-compression.html">
            
                    
                    C.17. HTTP Gzip Compression (gziphandler)
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="5.1.18" data-path="C-send-email.html">
            
                <a href="C-send-email.html">
            
                    
                    C.18. Send Mail (net/smtp, Gomail v2)
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="5.1.19" data-path="C-read-write-excel-xlsx-file.html">
            
                <a href="C-read-write-excel-xlsx-file.html">
            
                    
                    C.19. Read & Write Excel XLSX File (Excelize)
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="5.1.20" data-path="C-write-pdf-file.html">
            
                <a href="C-write-pdf-file.html">
            
                    
                    C.20. Write PDF File (gofpdf)
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="5.1.21" data-path="C-convert-html-to-pdf.html">
            
                <a href="C-convert-html-to-pdf.html">
            
                    
                    C.21. Convert HTML to PDF (go-wkhtmltopdf)
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="5.1.22" data-path="C-scraping-parsing-html.html">
            
                <a href="C-scraping-parsing-html.html">
            
                    
                    C.22. Scraping & Parsing HTML (goquery)
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="5.1.23" data-path="C-xml-parser.html">
            
                <a href="C-xml-parser.html">
            
                    
                    C.23. Parse & Generate XML (etree)
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="5.1.24" data-path="C-https-tls.html">
            
                <a href="C-https-tls.html">
            
                    
                    C.24. HTTPS/TLS Web Server
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="5.1.25" data-path="C-http2-server-push.html">
            
                <a href="C-http2-server-push.html">
            
                    
                    C.25. HTTP/2 & HTTP/2 Server Push
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="5.1.26" data-path="C-client-http-request-advanced.html">
            
                <a href="C-client-http-request-advanced.html">
            
                    
                    C.26. Advanced Client HTTP Request
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="5.1.27" data-path="C-secure-insecure-client-http-request.html">
            
                <a href="C-secure-insecure-client-http-request.html">
            
                    
                    C.27. Secure & Insecure Client HTTP Request
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="5.1.28" data-path="C-golang-ftp.html">
            
                <a href="C-golang-ftp.html">
            
                    
                    C.28. FTP
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="5.1.29" data-path="C-golang-ssh-sftp.html">
            
                <a href="C-golang-ssh-sftp.html">
            
                    
                    C.29. SSH & SFTP
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="5.1.30" data-path="C-golang-protobuf-implementation.html">
            
                <a href="C-golang-protobuf-implementation.html">
            
                    
                    C.30. Protobuf
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="5.1.31" data-path="C-golang-grpc-protobuf.html">
            
                <a href="C-golang-grpc-protobuf.html">
            
                    
                    C.31. gRPC + Protobuf
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="5.1.32" data-path="C-golang-jwt.html">
            
                <a href="C-golang-jwt.html">
            
                    
                    C.32. JSON Web Token (JWT)
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="5.1.33" data-path="C-golang-ldap-authentication.html">
            
                <a href="C-golang-ldap-authentication.html">
            
                    
                    C.33. LDAP Authentication
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="5.1.34" data-path="C-golang-sso-saml-sp.html">
            
                <a href="C-golang-sso-saml-sp.html">
            
                    
                    C.34. SSO SAML (Service Provider)
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="5.1.35" data-path="C-dockerize-golang.html">
            
                <a href="C-dockerize-golang.html">
            
                    
                    C.35. Dockerize Aplikasi Golang
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="5.1.36" data-path="C-golang-redis.html">
            
                <a href="C-golang-redis.html">
            
                    
                    C.36. Redis
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="5.1.37" data-path="C-singleflight.html">
            
                <a href="C-singleflight.html">
            
                    
                    C.37. Singleflight
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

    
        
        <li class="divider"></li>
        
        
    
        <li class="chapter " data-level="6.1" >
            
                <span>
            
                    
                    D. Studi Kasus
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="6.1.1" data-path="D-insert-1mil-csv-record-into-db-in-a-minute.html">
            
                <a href="D-insert-1mil-csv-record-into-db-in-a-minute.html">
            
                    
                    D.1. Insert 1 Juta Data dari File CSV Ke Database Server, Menggunakan Teknik Worker Pool, Database Connection Pool, dan Mekanisme Failover
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="6.1.2" data-path="D-google-api-search.html">
            
                <a href="D-google-api-search.html">
            
                    
                    D.2. Google API Search Dengan Timeout
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="6.1.3" data-path="D-golang-web-socket-chatting-app.html">
            
                <a href="D-golang-web-socket-chatting-app.html">
            
                    
                    D.3. Web Socket: Chatting App
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

    

    <li class="divider"></li>

    <li>
        <a href="https://www.gitbook.com" target="blank" class="gitbook-link">
            Published with GitBook
        </a>
    </li>
</ul>


                </nav>
            
        
    </div>

    <div class="book-body">
        
            <div class="body-inner">
                
                    

<div class="book-header" role="navigation">
    

    <!-- Title -->
    <h1>
        <i class="fa fa-circle-o-notch fa-spin"></i>
        <a href="." >C.14. CORS & Preflight Request</a>
    </h1>
</div>




                    <div class="page-wrapper" tabindex="-1" role="main">
                        <div class="page-inner">
                            
<div id="book-search-results">
    <div class="search-noresults">
    
                                <section class="normal markdown-section">
                                
                                <h1 id="c14-cors--preflight-request">C.14. CORS &amp; Preflight Request</h1>
<p>Pada chapter ini kita akan belajar tentang Cross-Origin Resource Sharing (CORS) dan Preflight Request.</p>
<h2 id="c141-teori--penerapan">C.14.1. Teori &amp; Penerapan</h2>
<p>CORS adalah mekanisme untuk memberi tahu browser, apakah sebuah request yang di-dispatch dari aplikasi web domain lain atau origin lain, ke aplikasi web kita itu diperbolehkan atau tidak. Jika aplikasi kita tidak mengijinkan maka akan muncul error, dan request pasti digagalkan oleh browser.</p>
<p>CORS hanya berlaku pada request-request yang dilakukan lewat browser, dari javascript; dan tujuan request-nya berbeda domain/origin. Jadi request yang dilakukan dari curl maupun dari back end, tidak terkena dampak aturan CORS.</p>
<blockquote>
<p>Request jenis ini biasa disebut dengan istilah cross-origin HTTP request.</p>
</blockquote>
<p>Konfigurasi CORS dilakukan di <strong>response header</strong> aplikasi web. Penerapannya di semua bahasa pemrograman yang web-based adalah sama, yaitu dengan memanipulasi response header-nya. Berikut merupakan list header yang bisa digunakan untuk konfigurasi CORS.</p>
<ul>
<li>Access-Control-Allow-Origin</li>
<li>Access-Control-Allow-Methods</li>
<li>Access-Control-Allow-Headers</li>
<li>Access-Control-Allow-Credentials</li>
<li>Access-Control-Max-Age</li>
</ul>
<p>Konfigurasi CORS berada di sisi server, di aplikasi web tujuan request. </p>
<p>Permisalan: aplikasi kita di local mengambil data dari google.com, maka konfigurasi CORS berada di google.com; Jika kita terkena error CORS maka tak ada lagi yang bisa dilakukan, karena CORS aplikasi tujuan dikontrol oleh orang-orang yang ada di google.com.</p>
<p>Agar lebih mudah untuk dipahami bagaimana penerapannya, mari langsung kita praktekan seperti biasanya.</p>
<h2 id="c142-aplikasi-dengan-konfigurasi-cors-sederhana">C.14.2. Aplikasi dengan konfigurasi CORS sederhana</h2>
<p>Buat project baru, lalu isi fungsi <code>main()</code> dengan kode berikut. Aplikasi sederhana ini akan kita jalankan pada domain atau origin <code>http://localhost:3000/</code>, lalu akan kita coba akses dari domain berbeda.</p>
<pre><code class="lang-go"><span class="hljs-keyword">package</span> main

<span class="hljs-keyword">import</span> (
    <span class="hljs-string">&quot;log&quot;</span>
    <span class="hljs-string">&quot;net/http&quot;</span>
)

<span class="hljs-keyword">func</span> main() {
    http.HandleFunc(<span class="hljs-string">&quot;/index&quot;</span>, <span class="hljs-keyword">func</span>(w http.ResponseWriter, r *http.Request) {
        w.Header().Set(<span class="hljs-string">&quot;Access-Control-Allow-Origin&quot;</span>, <span class="hljs-string">&quot;https://www.google.com&quot;</span>)
        w.Header().Set(<span class="hljs-string">&quot;Access-Control-Allow-Methods&quot;</span>, <span class="hljs-string">&quot;OPTIONS, GET, POST, PUT&quot;</span>)
        w.Header().Set(<span class="hljs-string">&quot;Access-Control-Allow-Headers&quot;</span>, <span class="hljs-string">&quot;Content-Type, X-CSRF-Token&quot;</span>)

        <span class="hljs-keyword">if</span> r.Method == <span class="hljs-string">&quot;OPTIONS&quot;</span> {
            w.Write([]<span class="hljs-keyword">byte</span>(<span class="hljs-string">&quot;allowed&quot;</span>))
            <span class="hljs-keyword">return</span>
        }

        w.Write([]<span class="hljs-keyword">byte</span>(<span class="hljs-string">&quot;hello&quot;</span>))
    })

    log.Println(<span class="hljs-string">&quot;Starting app at :9000&quot;</span>)
    http.ListenAndServe(<span class="hljs-string">&quot;:9000&quot;</span>, <span class="hljs-literal">nil</span>)
}
</code></pre>
<p>Seperti yang sudah dijelaskan, bahwa konfigurasi CORS berada di header response. Pada kode di atas 3 buah property header untuk keperluan CORS digunakan.</p>
<p>Header <code>Access-Control-Allow-Origin</code> digunakan untuk menentukan domain mana saja yang diperbolehkan mengakses aplikasi ini. Kita bisa set value-nya dengan banyak origin, hal ini diperbolehkan dalam <a href="https://www.w3.org/TR/cors/#access-control-allow-origin-response-header" target="_blank">spesifikasi CORS</a> namun sayangnya banyak browser yang tidak support.</p>
<pre><code class="lang-http"><span class="hljs-attribute">Access-Control-Allow-Origin</span>: https://www.google.com
</code></pre>
<p>Kode di atas artinya request yang di-dispatch dari <a href="https://www.google.com" target="_blank">https://www.google.com</a> diijinkan untuk masuk; Penulis memilih domain google karena testing akan dilakukan dari sana, dengan tujuan destinasi request adalah <code>http://localhost:3000/</code>.</p>
<p>Simulasi pada chapter ini adalah <strong>aplikasi web localhost:3000 diakses dari google.com</strong> (eksekusi request sendiri kita lakukan dari browser dengan memanfaatkan developer tools milik chrome). BUKAN google.com diakses dari aplikasi web localhost:3000, jangan sampai dipahami terbalik.</p>
<p>Kembali ke pembahasan source code. Dua header CORS lainnya digunakan untuk konfigurasi yang lebih mendetail.</p>
<pre><code class="lang-http"><span class="hljs-attribute">Access-Control-Allow-Methods</span>: OPTIONS, GET, POST, PUT
<span class="hljs-attribute">Access-Control-Allow-Headers</span>: Content-Type, X-CSRF-Token
</code></pre>
<p>Header <code>Access-Control-Allow-Methods</code> menentukan HTTP Method mana saja yang diperbolehkan masuk (penulisannya dengan pembatas koma). </p>
<blockquote>
<p>Dianjurkan untuk selalu memasukan method <code>OPTIONS</code> karena method ini dibutuhkan oleh preflight request.</p>
</blockquote>
<p>Header <code>Access-Control-Allow-Headers</code> menentukan key header mana saja yang diperbolehkan di-dalam request.</p>
<p>Jika request tidak memenuhi salah satu saja dari ke-tiga rules di atas, maka request bisa dipastikan gagal. Contoh:</p>
<ul>
<li>Request dari <a href="https://novalagung.com" target="_blank">https://novalagung.com</a> ke <a href="http://localhost:3000" target="_blank">http://localhost:3000</a>, hasilnya pasti gagal, karena origin novalagung.com tidak diijinkan untuk mengakses <a href="http://localhost:3000" target="_blank">http://localhost:3000</a>.</li>
<li>Request dari <a href="https://www.google.com" target="_blank">https://www.google.com</a> ke <a href="http://localhost:3000" target="_blank">http://localhost:3000</a> dengan method adalah <code>DELETE</code>, hasilnya pasti gagal. Method <code>DELETE</code> adalah tidak di-ijinkan. hanya empat method <code>OPTIONS</code>, <code>GET</code>, <code>POST</code>, <code>PUT</code> yang diijinkan.</li>
<li>Request dari <a href="https://www.google.com" target="_blank">https://www.google.com</a> ke <a href="http://localhost:3000" target="_blank">http://localhost:3000</a> dengan method GET, degan header <code>Authorization: Basic xxx</code> dan <code>X-CSRF-Token: xxxx</code>, hasilnya adalah gagal. Karena salah satu dari kedua header tersebut tidak diijinkan (header <code>Authorization</code>).</li>
<li>Request dari <a href="https://www.google.com" target="_blank">https://www.google.com</a> ke <a href="http://localhost:3000" target="_blank">http://localhost:3000</a> dengan method <code>GET</code> dan memiliki header <code>Content-Type</code> adalah diijinkan masuk, karena memenuhi semua aturan yang kita definiskan.</li>
</ul>
<p>Khusus untuk beberapa header seperti <code>Accept</code>, <code>Origin</code>, <code>Referer</code>, dan <code>User-Agent</code> tidak terkena efek CORS, karena header-header tersebut secara otomatis di-set di setiap request.</p>
<h2 id="c143-testing-cors">C.14.3. Testing CORS</h2>
<h4 id="persiapan">&#x2022; Persiapan</h4>
<p>Ada beberapa hal yang perlu dipersiapkan. Pertama, pastikan punya google chrome. Lalu install extension <a href="https://chrome.google.com/webstore/detail/jquery-injector/ekkjohcjbjcjjifokpingdbdlfekjcgi?hl=en" target="_blank">jQuery Injector</a>. Buka <a href="https://www.google.com" target="_blank">https://www.google.com</a> lalu inject jQuery. Dengan melakukan inject jQuery secara paksa maka dari situs google kita bisa menggunakan jQuery.</p>
<p>Buka chrome developer tools, klik tab console. Lalu jalankan perintah jQuery AJAX berikut.</p>
<pre><code class="lang-js">$.ajax({
    url: <span class="hljs-string">&quot;http://localhost:9000/index&quot;</span>,
})
</code></pre>
<p>Silakan lihat gambar berikut untuk memperjelas.</p>
<p><img src="images/C_cors_preflight_request_1_cors_from_google_to_localhost.png" alt="Dasar Pemrograman Golang - CORS google to localhost"></p>
<p>Bisa dilihat, tidak ada error, karena memang request dari google diijinkan. Silakan coba-coba melakukan request AJAX lainnya dengan method POST, DELETE, atau lainnya; atau ditambah dengan menyisipkan header tertentu dalam ajax request.</p>
<h4 id="akses-httplocalhost9000-dari-origin-yang-tidak-didaftarkan-di-cors">&#x2022; Akses <a href="http://localhost:9000" target="_blank">http://localhost:9000</a> dari Origin yang Tidak Didaftarkan di CORS</h4>
<p>Selanjutnya coba buka tab baru, buka <a href="https://novalagung.com" target="_blank">https://novalagung.com</a>, lalu jalankan script yang sama.</p>
<p><img src="images/C_cors_preflight_request_2_cors_from_novalagung_to_localhost.png" alt="Dasar Pemrograman Golang - CORS novalagung to localhost"></p>
<pre style="font-size: .85em; white-space: pre-wrap; white-space: -moz-pre-wrap; white-space: -pre-wrap; white-space: -o-pre-wrap; word-wrap: break-word;">Failed to load http://localhost:9000/index: The &apos;Access-Control-Allow-Origin&apos; header has a value &apos;https://www.google.com&apos; that is not equal to the supplied origin. Origin &apos;https://novalagung.com&apos; is therefore not allowed access.</pre>

<p>Dari screenshot dan error log di atas, bisa dilihat bahwa request gagal. Hal ini dikarenakan origin <a href="https://novalagung.com" target="_blank">https://novalagung.com</a> tidak diijinkan untuk mengakses <a href="http://localhost:9000" target="_blank">http://localhost:9000</a>.</p>
<h4 id="cors-multiple-origin">&#x2022; CORS Multiple Origin</h4>
<p>Sekarang coba tambahkan situs <a href="https://novalagung.com" target="_blank">https://novalagung.com</a> ke CORS header.</p>
<pre><code class="lang-go">http.HandleFunc(<span class="hljs-string">&quot;/index&quot;</span>, <span class="hljs-keyword">func</span>(w http.ResponseWriter, r *http.Request) {
    w.Header().Set(<span class="hljs-string">&quot;Access-Control-Allow-Origin&quot;</span>, 
        <span class="hljs-string">&quot;https://www.google.com, https://novalagung.com&quot;</span>)

    <span class="hljs-comment">// ...</span>
</code></pre>
<p>Jalankan ulang aplikasi, lalu dispatch lagi AJAX dari situs tersebut.</p>
<p><img src="images/C_cors_preflight_request_3_cors_multiple_domain.png" alt="Dasar Pemrograman Golang - CORS multiple domain"></p>
<p>Masih tetap error, tapi berbeda dengan error sebelumnya.</p>
<pre style="font-size: .85em; white-space: pre-wrap; white-space: -moz-pre-wrap; white-space: -pre-wrap; white-space: -o-pre-wrap; word-wrap: break-word;">Failed to load http://localhost:9000/index: The &apos;Access-Control-Allow-Origin&apos; header contains multiple values &apos;https://www.google.com, https://novalagung.com&apos;, but only one is allowed. Origin &apos;https://novalagung.com&apos; is therefore not allowed access.</pre>

<p>Sebenarnya sudah kita singgung juga di atas, bahwa di spesifikasi adalah diperbolehkan isi header <code>Access-Control-Allow-Origin</code> lebih dari satu website. Namun, kebanyakan browser tidak mendukung bagian ini. Oleh karena itu error di atas muncul. Konfigurasi ini termasuk tidak valid, hasilnya kedua website tersebut tidak punya ijin masuk.</p>
<h4 id="allow-all">&#x2022; Allow All</h4>
<p>Gunakan tanda asteriks (<code>*</code>) sebagai nilai ketiga CORS header untuk memberi ijin ke semua.</p>
<pre><code class="lang-go"><span class="hljs-comment">// semua origin mendapat ijin akses</span>
w.Header().Set(<span class="hljs-string">&quot;Access-Control-Allow-Origin&quot;</span>, <span class="hljs-string">&quot;*&quot;</span>)

<span class="hljs-comment">// semua method diperbolehkan masuk</span>
w.Header().Set(<span class="hljs-string">&quot;Access-Control-Allow-Methods&quot;</span>, <span class="hljs-string">&quot;*&quot;</span>)

<span class="hljs-comment">// semua header diperbolehkan untuk disisipkan</span>
w.Header().Set(<span class="hljs-string">&quot;Access-Control-Allow-Headers&quot;</span>, <span class="hljs-string">&quot;*&quot;</span>)
</code></pre>
<h2 id="c144-preflight-request">C.14.4. Preflight Request</h2>
<h4 id="teori">&#x2022; Teori</h4>
<p>Dalam konteks CORS, request dikategorikan menjadi 2 yaitu, <strong>Simple Request</strong> dan <strong>Preflighted Request</strong>. Beberapa contoh request yang sudah kita pelajari di atas termasuk simple request.</p>
<p>Sedangkan mengenai preflighted request sendiri, mungkin pembaca secara tidak langsung juga pernah menerapkannya, terutama ketika bekerja di bagian front-end yang mengonsumsi data dari RESTful API yang server nya terpisah antara layer front end dan back end.</p>
<p>Ketika melakukan cross origin request dengan payload adalah JSON, atau request jenis lainnya, biasanya di developer tools -&gt; network log muncul 2 kali request, request pertama method-nya <code>OPTIONS</code> dan request ke-2 adalah actual request.</p>
<p>Request ber-method <code>OPTIONS</code> tersebut disebut dengan <strong>Preflight Request</strong>. Request ini akan otomatis muncul ketika http request yang kita dispatch memenuhi kriteria preflighted request. </p>
<p>Tujuan dari preflight request adalah untuk mengecek apakah destinasi url mendukung CORS. Tiga buah informasi dikirimkan <code>Access-Control-Request-Method</code>, <code>Access-Control-Request-Headers</code>, dan <code>Origin</code>, dengan method adalah <code>OPTIONS</code>.</p>
<p>Berikut merupakan kriteria preflighted request.</p>
<ul>
<li>Method yang digunakan adalah salah satu dari method berikut:<ul>
<li><code>PUT</code></li>
<li><code>DELETE</code></li>
<li><code>CONNECT</code></li>
<li><code>OPTIONS</code></li>
<li><code>TRACE</code></li>
<li><code>PATCH</code></li>
</ul>
</li>
<li>Terdapat header SELAIN yang otomatis di-set dalam http request. Contoh header untuk kriteria ini adalah <code>Authorization</code>, <code>X-CSRF-Token</code>, atau lainnya.</li>
<li>Isi header <code>Content-Type</code> adalah SELAIN satu dari 3 berikut.<ul>
<li>application/x-www-form-urlencoded</li>
<li>multipart/form-data</li>
<li>text/plain</li>
</ul>
</li>
<li>Ada event yang ter-registrasi dalam objek <code>XMLHttpRequestUpload</code> yang digunakan dalam request.</li>
<li>Menggunakan objek <code>ReadableStream</code> dalam request.</li>
</ul>
<blockquote>
<p>Lebih detailnya mengenai simple dan preflighted request silakan baca <a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/CORS" target="_blank">https://developer.mozilla.org/en-US/docs/Web/HTTP/CORS</a>.</p>
</blockquote>
<p>Pada kode yang kita tulis, terdapat pengecekan method <code>OPTIONS</code>. Pengecekan ini digunakan untuk mencegah eksekusi statement selanjutnya. Hal ini dikarenakan preflight request tidak membutuhkan kembalian data, tugas si dia hanya mengecek apakah cross origin request didukung atau tidak. Jadi pada handler, ketika method nya adalah <code>OPTIONS</code>, langsung saja intercept proses utamanya.</p>
<blockquote>
<p>Header <code>Access-Control-Max-Age</code> diisi dengan data waktu, digunakan untuk menentukan sebearapa lama informasi preflight request di-cache. Jika diisi dengan <code>-1</code> maka cache di-non-aktifkan.</p>
</blockquote>
<pre><code class="lang-go">http.HandleFunc(<span class="hljs-string">&quot;/index&quot;</span>, <span class="hljs-keyword">func</span>(w http.ResponseWriter, r *http.Request) {
    <span class="hljs-comment">// ...</span>

    <span class="hljs-keyword">if</span> r.Method == <span class="hljs-string">&quot;OPTIONS&quot;</span> {
        w.Write([]<span class="hljs-keyword">byte</span>(<span class="hljs-string">&quot;allowed&quot;</span>))
        <span class="hljs-keyword">return</span>
    }

    <span class="hljs-comment">// ...</span>
})
</code></pre>
<h4 id="praktek">&#x2022; Praktek</h4>
<p>Langsung saja buka google.com lalu lakukan AJAX request yang memenuhi alah satu kriteria preflighted request, misalnya, gunakan header <code>Content-Type: application/json</code>.</p>
<p><img src="images/C_cors_preflight_request_4_preflight_allowed.png" alt="Dasar Pemrograman Golang - Preflight Request Preview"></p>
<p>Bisa dilihat pada screenshot, dua request muncul, yang pertama adalah preflight yang kedua adalah actual request.</p>
<h2 id="c145-cors-handling-menggunakan-golang-cors-library-dan-echo">C.14.5. CORS Handling Menggunakan Golang CORS Library dan Echo</h2>
<p>Pada bagian ini kita akan mengkombinasikan library CORS golang buatan Olivier Poitrey, dan Echo, untuk membuat back end yang mendukung cross origin request.</p>
<p>Pertama <code>go get</code> dulu library-nya.</p>
<pre><code class="lang-bash">go get https://github.com/rs/cors
</code></pre>
<p>Buat file baru, import library yang diperlukan lalu buat fungsi main.</p>
<pre><code class="lang-go"><span class="hljs-keyword">package</span> main

<span class="hljs-keyword">import</span> (
    <span class="hljs-string">&quot;github.com/labstack/echo&quot;</span>
    <span class="hljs-string">&quot;github.com/rs/cors&quot;</span>
    <span class="hljs-string">&quot;net/http&quot;</span>
)

<span class="hljs-keyword">func</span> main() {
    e := echo.New()

    <span class="hljs-comment">// ...</span>

    e.GET(<span class="hljs-string">&quot;/index&quot;</span>, <span class="hljs-keyword">func</span>(c echo.Context) error {
        <span class="hljs-keyword">return</span> c.String(http.StatusOK, <span class="hljs-string">&quot;hello&quot;</span>)
    })

    e.Logger.Fatal(e.Start(<span class="hljs-string">&quot;:9000&quot;</span>))
}
</code></pre>
<p>Siapkan objek <code>corsMiddleware</code>, cetak dari fungsi <code>cors.New()</code> . Pada parameter konfigurasi, isi spesifikasi CORS sesuai kebutuhan.</p>
<p>Gaya konfigurasi library ini menarik, mudah sekali untuk dipahami.</p>
<pre><code class="lang-go">corsMiddleware := cors.New(cors.Options{
    AllowedOrigins: []<span class="hljs-keyword">string</span>{<span class="hljs-string">&quot;https://novalagung.com&quot;</span>, <span class="hljs-string">&quot;https://www.google.com&quot;</span>},
    AllowedMethods: []<span class="hljs-keyword">string</span>{<span class="hljs-string">&quot;OPTIONS&quot;</span>, <span class="hljs-string">&quot;GET&quot;</span>, <span class="hljs-string">&quot;POST&quot;</span>, <span class="hljs-string">&quot;PUT&quot;</span>},
    AllowedHeaders: []<span class="hljs-keyword">string</span>{<span class="hljs-string">&quot;Content-Type&quot;</span>, <span class="hljs-string">&quot;X-CSRF-Token&quot;</span>},
    Debug:          <span class="hljs-literal">true</span>,
})
e.Use(echo.WrapMiddleware(corsMiddleware.Handler))
</code></pre>
<p>Pada kode di atas, kita meng-allow dua buah origin. Sebelumnya sudah kita bahas bahwa kebanyakan browser tidak mendukung ini. Dengan menggunakan CORS library, hal itu bisa teratasi. </p>
<blockquote>
<p>Sebenarnya mekanisme yang diterapkan oleh CORS library adalah meng-allow semua origin, lalu kemudian mem-filter sesuai dengan spesifikasi yang kita buat, lalu memodifikasi response header <code>Access-Control-Allow-Origin</code>-nya.</p>
</blockquote>
<p>Jalankan aplikasi, coba test dari dua domain, <a href="https://novalagung.com" target="_blank">https://novalagung.com</a> dan <a href="https://www.google.com" target="_blank">https://www.google.com</a>.</p>
<p><img src="images/C_cors_preflight_request_5_multi_domain.png" alt="Dasar Pemrograman Golang - CORS multi domain"></p>
<p>Berikut adalah list konfigurasi yang bisa dimanfaatkan dari library ini.</p>
<table>
<thead>
<tr>
<th>Key</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>AllowedOrigins</td>
<td>list origin/domain yang diperbolehkan mengakses, gunakan <code>*</code> untuk allow all</td>
</tr>
<tr>
<td>AllowOriginFunc</td>
<td>callback untuk validasi origin. cocok digunakan untuk menge-set CORS header origin dengan ijin rumit</td>
</tr>
<tr>
<td>AllowedMethods</td>
<td>list HTTP method yang diperbolehkan untuk pengaksesan</td>
</tr>
<tr>
<td>AllowedHeaders</td>
<td>list header yang diperbolehkan untuk pengaksesan</td>
</tr>
<tr>
<td>ExposedHeaders</td>
<td>menentukan header mana saja yang di-expose ke consumer</td>
</tr>
<tr>
<td>AllowCredentials</td>
<td>enable/disable credentials</td>
</tr>
<tr>
<td>MaxAge</td>
<td>durasi cache preflight request</td>
</tr>
<tr>
<td>OptionsPassthrough</td>
<td>digunakan untuk menginstruksikan handler selanjutnya untuk memproses OPTIONS method</td>
</tr>
<tr>
<td>Debug</td>
<td>aktifkan properti ini pada stage development, agar banyak informasi log tambahan bisa muncul</td>
</tr>
</tbody>
</table>
<hr>
<ul>
<li><a href="https://github.com/rs/cors" target="_blank">CORS</a>, by Olivier Poitrey, MIT license</li>
<li><a href="https://github.com/labstack/echo" target="_blank">Echo</a>, by Vishal Rana (Lab Stack), MIT license</li>
</ul>
<!-- https://www.html5rocks.com/en/tutorials/cors/ -->
<!-- https://stackoverflow.com/questions/12320467/jquery-cors-content-type-options -->
<!-- https://stackoverflow.com/questions/22343384/the-access-control-allow-origin-header-contains-multiple-values -->
<hr>
<div class="source-code-link">
    <div class="source-code-link-message">Source code praktek chapter ini tersedia di Github</div>
    <a href="https://github.com/novalagung/dasarpemrogramangolang-example/tree/master/chapter-C.14-cors-preflight-request" target="_blank">https://github.com/novalagung/dasarpemrogramangolang-example/.../chapter-C.14...</a>
</div>

                                
                                </section>
                            
    </div>
    <div class="search-results">
        <div class="has-results">
            
            <h1 class="search-results-title"><span class='search-results-count'></span> results matching "<span class='search-query'></span>"</h1>
            <ul class="search-results-list"></ul>
            
        </div>
        <div class="no-results">
            
            <h1 class="search-results-title">No results matching "<span class='search-query'></span>"</h1>
            
        </div>
    </div>
</div>

                        </div>
                    </div>
                
            </div>

            
                
                <a href="C-session.html" class="navigation navigation-prev " aria-label="Previous page: C.13. Session (Gorilla Session)">
                    <i class="fa fa-angle-left"></i>
                </a>
                
                
                <a href="C-csrf.html" class="navigation navigation-next " aria-label="Next page: C.15. CSRF">
                    <i class="fa fa-angle-right"></i>
                </a>
                
            
        
    </div>

    <script>
        var gitbook = gitbook || [];
        gitbook.push(function() {
            gitbook.page.hasChanged({"page":{"title":"C.14. CORS & Preflight Request","level":"5.1.14","depth":2,"next":{"title":"C.15. CSRF","level":"5.1.15","depth":2,"path":"C-csrf.md","ref":"C-csrf.md","articles":[]},"previous":{"title":"C.13. Session (Gorilla Session)","level":"5.1.13","depth":2,"path":"C-session.md","ref":"C-session.md","articles":[]},"dir":"ltr"},"config":{"plugins":["disqus","meta","sitemap"],"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"pluginsConfig":{"disqus":{"useIdentifier":false,"shortName":"dasarpemrogramangolang"},"meta":{"name":"","content":"","data":[{"name":"google-site-verification","content":"UZnxS2Dk3fm2_Elms3a__56Q_oQ3sQ1h0SVXXlHSmbE"},{"name":"og:image","content":"https://dasarpemrogramangolang.novalagung.com/images/cover_fb_share.jpg"},{"name":"twitter:image","content":"https://dasarpemrogramangolang.novalagung.com/images/cover_fb_share.jpg"}]},"search":{},"lunr":{"maxIndexSize":1000000,"ignoreSpecialCharacters":false},"fontsettings":{"theme":"white","family":"sans","size":2},"highlight":{},"sitemap":{"hostname":"https://dasarpemrogramangolang.novalagung.com/"},"sharing":{"facebook":true,"twitter":true,"google":false,"weibo":false,"instapaper":false,"vk":false,"all":["facebook","google","twitter","weibo","instapaper"]},"theme-default":{"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"showLevel":false}},"theme":"default","lunr":{"maxIndexSize":1000000000},"pdf":{"pageNumbers":true,"fontSize":12,"fontFamily":"Arial","paperSize":"a4","chapterMark":"pagebreak","pageBreaksBefore":"/","margin":{"right":62,"left":62,"top":56,"bottom":56}},"structure":{"langs":"LANGS.md","readme":"README.md","glossary":"GLOSSARY.md","summary":"SUMMARY.md"},"variables":{},"gitbook":"*"},"file":{"path":"C-cors-preflight-request.md","mtime":"2022-12-04T08:51:09.781Z","type":"markdown"},"gitbook":{"version":"3.2.3","time":"2022-12-04T08:52:12.518Z"},"basePath":".","book":{"language":""}});
        });
    </script>
</div>

        
    <script src="gitbook/gitbook.js"></script>
    <script src="gitbook/theme.js"></script>
    
        
        <script src="https://cdnjs.cloudflare.com/ajax/libs/URI.js/1.16.1/URI.min.js"></script>
        
    
        
        <script src="gitbook/gitbook-plugin-disqus/plugin.js"></script>
        
    
        
        <script src="gitbook/gitbook-plugin-search/search-engine.js"></script>
        
    
        
        <script src="gitbook/gitbook-plugin-search/search.js"></script>
        
    
        
        <script src="gitbook/gitbook-plugin-lunr/lunr.min.js"></script>
        
    
        
        <script src="gitbook/gitbook-plugin-lunr/search-lunr.js"></script>
        
    
        
        <script src="gitbook/gitbook-plugin-sharing/buttons.js"></script>
        
    
        
        <script src="gitbook/gitbook-plugin-fontsettings/fontsettings.js"></script>
        
    

    <div style="position: fixed; top: 10px; right: 30px; padding: 10px; background-color: rgba(255, 255, 255, 0.7);"><a class="github-button" href="https://github.com/novalagung/dasarpemrogramangolang" data-icon="octicon-star" data-size="large" data-show-count="true" aria-label="Star novalagung/dasarpemrogramangolang on GitHub">Star</a>&nbsp;<a class="github-button" href="https://github.com/novalagung" data-size="large" aria-label="Follow @novalagung on GitHub">Follow @novalagung</a><script async defer src="https://buttons.github.io/buttons.js"></script></div></body>
</html>